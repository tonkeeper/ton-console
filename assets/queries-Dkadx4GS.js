import{q as n,aT as a,s as c,a3 as y,v as d,aU as u,cg as l,ch as p,ci as f,cj as j,ck as w,cl as x}from"./index--6gyeIm1.js";function L(){const e=n();return a({queryKey:["liteproxy-list",e||void 0],queryFn:async()=>{if(!e)return[];const{data:r,error:t}=await j({query:{project_id:e}});if(t){if(t.error==="keys not found")return[];throw t}return r.keys},enabled:!!e,staleTime:30*1e3})}function T(){return a({queryKey:["liteproxy-tiers"],queryFn:async()=>{const{data:e,error:r}=await w();if(r)throw r;return e.tiers},staleTime:5*60*1e3})}function h(){const e=c();return a({queryKey:["selected-liteproxy-tier",(e==null?void 0:e.id)||void 0],queryFn:async()=>{if(!e)return null;const{data:r,error:t}=await x({query:{project_id:e.id}});if(t)throw t;return r.tier},enabled:!!e,staleTime:30*1e3})}function C(){return h()}function b(){const e=y(),r=n(),t=d();return u({mutationFn:async()=>{const s=r;if(!s)throw new Error("Project not selected");const{data:o,error:i}=await l({query:{project_id:s}});if(i)throw i;return{keys:o.keys,_projectId:s}},onSuccess:s=>{e.invalidateQueries({queryKey:["liteproxy-list",s._projectId]}),t({title:"Api key has been created successfully",status:"success",duration:3e3,isClosable:!0})},onError:()=>{t({title:"Api key wasn't created",status:"error",duration:3e3,isClosable:!0})}})}function I(){const e=y(),r=n(),t=d();return u({mutationFn:async s=>{const o=r;if(!o)throw new Error("Project not selected");const{error:i}=await f({query:{project_id:o},body:{tier_id:s}});if(i)throw i;return{tierId:s,_projectId:o}},onSuccess:s=>{e.invalidateQueries({queryKey:["selected-liteproxy-tier",s._projectId]}),t({title:"Successful purchase",status:"success",duration:3e3,isClosable:!0})},onError:()=>{t({title:"Unsuccessful purchase",status:"error",duration:3e3,isClosable:!0})}})}function _(){const e=c();return u({mutationFn:async r=>{const t=e==null?void 0:e.id;if(!t)throw new Error("Project not selected");const{data:s,error:o}=await p({path:{id:r},query:{project_id:t}});if(o)throw o;return s}})}export{h as a,I as b,T as c,_ as d,b as e,L as f,C as u};
