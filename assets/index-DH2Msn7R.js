import{j as e,cu as y,aK as C,O as h,k as f,cv as G,T as j,F as x,d as O,b as u,D as b,bK as S,p as v,bN as I,cw as P,L as D,cx as E,K as R,c8 as F,r as l,cy as L,bh as A,C as H,G as N}from"./index-BCN26Ft_.js";import{A as T}from"./analytics-graph-query.store-aBxkGm8c.js";import{O as K,a as Q}from"./list-D2sr8y6t.js";import{A as _}from"./ANALYTICS_LINKS-WaHD7Hyc.js";import{u as B}from"./create-reaction-CzXnGxB7.js";const k=({addresses:s,...c})=>e.jsx(K,{sx:{counterReset:"item",listStyleType:"none","li:before":{content:'counter(item) "  "',counterIncrement:"item",display:"inline-block",width:"28px"}},textStyle:"body2",overflow:"auto",color:"text.secondary",fontFamily:"mono",stylePosition:"inside",...c,children:s.map(n=>e.jsx(Q,{display:"block",children:n.userFriendly},n.userFriendly))}),z=({query:s})=>{const[c,n]=y(),{hasCopied:o,onCopy:a}=C(s.addresses.map(i=>i.userFriendly).join(`
`));return e.jsxs(h,{h:"100%",maxH:"100%",display:"flex",flexDirection:"column",children:[e.jsxs(f,{display:"flex",alignItems:"center",color:"accent.green",mb:"2",children:[e.jsx(G,{mr:"2"}),"Success"]}),e.jsx(j,{textStyle:"body2",mb:"4",color:"text.secondary",children:"Following the link you will see a visualization of the stories of the accounts you specified"}),e.jsxs(x,{gap:"4",children:[e.jsx(O,{w:"fit-content",isExternal:!0,href:s.resultUrl,mb:"5",children:"Show Result"}),e.jsx(u,{onClick:()=>n({}),variant:"secondary",children:"New Request"})]}),e.jsx(b,{w:"auto",mx:"-6",mb:"5"}),e.jsxs(x,{align:"center",gap:"1",mb:"3",children:[e.jsx(S,{mb:"0 !important",isChecked:s.isBetweenSelectedOnly,isDisabled:!0,children:"Only between these accounts"}),e.jsx(v,{children:"Description"})]}),e.jsx(k,{mb:"5",addresses:s.addresses}),e.jsx(u,{w:"fit-content",mb:"5",leftIcon:e.jsx(I,{color:"icon.primary"}),onClick:a,variant:"secondary",children:o?"Copied!":"Copy"})]})},U=({query:s})=>{const[c,n]=y(),{hasCopied:o,onCopy:a}=C(s.addresses.map(i=>i.userFriendly).join(`
`));return e.jsxs(h,{display:"flex",flexDirection:"column",children:[e.jsxs(f,{color:"accent.red",mb:"2",display:"flex",alignItems:"center",children:[e.jsx(P,{mr:"2"}),"Error"]}),e.jsx(j,{textStyle:"body2",mb:"4",color:"text.secondary",children:s.errorReason}),e.jsx(u,{w:"fit-content",mb:"5",onClick:()=>n({}),variant:"secondary",children:"New Request"}),e.jsx(b,{w:"auto",mx:"-6",mb:"5"}),e.jsxs(x,{align:"center",gap:"1",mb:"3",children:[e.jsx(S,{mb:"0 !important",isChecked:s.isBetweenSelectedOnly,isDisabled:!0,children:"Only between these accounts"}),e.jsx(v,{children:"Description"})]}),e.jsx(k,{mb:"5",addresses:s.addresses}),e.jsx(u,{w:"fit-content",mb:"5",leftIcon:e.jsx(I,{color:"icon.primary"}),onClick:a,variant:"secondary",children:o?"Copied!":"Copy"})]})},W=({analyticsGraphQueryStore:s})=>e.jsxs(h,{display:"flex",flexDirection:"column",children:[e.jsxs(x,{align:"center",justify:"space-between",mb:"1",children:[e.jsx(f,{mb:"1",children:"Graph"}),e.jsx(D,{textStyle:"label2",color:"accent.blue",href:_.GRAPH.HOW_IT_WORKS,isExternal:!0,children:"How it works"})]}),e.jsx(j,{textStyle:"body2",mb:"5",color:"text.secondary",children:"Visualization of the transaction history of the accounts you are interested in."}),e.jsx(b,{w:"auto",mx:"-6",mb:"5"}),e.jsx(E,{flex:"1",analyticsGraphQueryStore:s})]}),X=()=>{const s=R(),[c,n]=y(),o=c.get("id"),a=F(),[i,d]=l.useState(!1),r=B(()=>new T(a));l.useEffect(()=>{var w;o?o!==((w=r.query$.value)==null?void 0:w.id)?(d(!1),r.loadQuery(o).then(()=>d(!0)).catch(()=>n({}))):d(!0):(d(!0),r.clear())},[o]);const m=a==null?void 0:a.id,p=L(m);l.useEffect(()=>{p!==void 0&&m!==p&&s("../history")},[p,m]);const t=r.query$.value,g=l.useCallback(()=>{(t==null?void 0:t.status)==="executing"&&r.refetchQuery()},[t==null?void 0:t.status,r]);return A(g,1e3),l.useEffect(()=>()=>{r.destroy()},[r]),i?(t==null?void 0:t.status)==="success"?e.jsx(z,{query:t}):(t==null?void 0:t.status)==="error"?e.jsx(U,{query:t}):e.jsx(W,{analyticsGraphQueryStore:r}):e.jsx(h,{children:e.jsx(H,{h:"300px",children:e.jsx(N,{})})})};export{X as default};
