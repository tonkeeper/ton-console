import{b4 as y,j as e,ax as C,b7 as g,b9 as D,ba as T,dt as S,az as v,b3 as I,ae as R,aZ as $,K as A,du as E,dv as N,dw as q,r as L,av as U,O as f,G as J,T as h,F as P,k as W,dx as z,bj as B,b as p,bz as H,bd as O,dy as V,dz as G,dA as K,L as Y,dB as Z}from"./index-BCN26Ft_.js";import{C as _,a as Q,b as X,c as ee}from"./LogoControl-Ctn0l0eO.js";const j="decimals",te=({context:{register:n,formState:{errors:r}}})=>{const s=j,t=r[j],{ref:i}=y({mask:Number,scale:0,min:0,max:255}),{ref:a,...o}=n(s,{required:"This is required"});return e.jsxs(C,{mb:0,isInvalid:!!t,isRequired:!0,children:[e.jsx(g,{htmlFor:s,children:"Decimal precision"}),e.jsx(D,{ref:T(i,a),autoComplete:"off",defaultValue:"9",id:s,placeholder:"9",...o}),e.jsx(S,{color:"text.secondary",children:"The decimal precision of your token (9 is TON default)."}),e.jsx(v,{pos:"static",children:t&&t.message})]})},b="mint",se=({context:{register:n,formState:{errors:r}}})=>{const s=b,t=r[b],{ref:i}=y({mask:/^(0|[1-9]\d*)$/}),{ref:a,...o}=n(s,{required:"This is required",validate:l=>Number(l)>0||"Should be greater than 0"});return e.jsxs(C,{mb:0,isInvalid:!!t,isRequired:!0,children:[e.jsx(g,{htmlFor:s,children:"Tokens to Mint"}),e.jsx(D,{ref:T(i,a),autoComplete:"off",id:s,placeholder:"238",...o}),e.jsx(v,{pos:"static",children:t&&t.message})]})},oe=({id:n,onSubmit:r,...s})=>{const t=I(),{handleSubmit:i}=t,a=o=>{r(o)};return e.jsxs(R.form,{id:n,w:"100%",maxW:600,onSubmit:i(a),noValidate:!0,gap:4,display:"flex",flexDirection:"column",...s,children:[e.jsx(_,{context:t}),e.jsx(Q,{context:t}),e.jsx(te,{context:t}),e.jsx(se,{context:t}),e.jsx(X,{context:t}),e.jsx(ee,{context:t})]})},ne=9,ie=()=>{const n=$(),r=A(),s=E(),{open:t}=N(),[i]=q(),[a,o]=L.useState(!1),l="jetton-form-id",F=U({}),w=async c=>{o(!0);const d={onchainMetaData:{name:c.name,symbol:c.symbol,description:c.description,decimals:c.decimals,image:c.image},offchainUri:void 0,owner:O.Address.parse(s),amountToMint:H(c.mint,c.decimals??ne)},k=await V(d,d.offchainUri),u=new G().addressForContract(k),M=await K.accounts.getAccount(u).then(m=>m.status==="active"),x=`/jetton/minter/view/${u.toString()}`;if(M){o(!1),n({title:"Contract already deployed",description:e.jsxs(h,{children:["This contract already exists. You can view it"," ",e.jsx(Y,{textStyle:"body1",color:"constant.white",textDecoration:"underline",href:x,children:"here"})]}),position:"bottom-left",status:"error",duration:1e6,isClosable:!0});return}await Z.createJetton(d,i).then(()=>r(x)).catch(m=>n({title:"Error",description:m.message,status:"error",position:"bottom-left",duration:1e6,isClosable:!0})).finally(()=>{o(!1)})};return a?e.jsxs(f,{display:"flex",justifyContent:"center",alignItems:"center",children:[e.jsx(J,{}),e.jsx(h,{ml:2,children:"Deploying jetton contract..."})]}):e.jsxs(f,{display:"flex",flexDirection:"column",children:[e.jsxs(P,{align:"flex-start",justify:"space-between",mb:"5",children:[e.jsx(W,{children:"New Jetton"}),e.jsx(z,{})]}),e.jsx(B,{...F,children:e.jsx(oe,{onSubmit:w,id:l})}),s?e.jsx(p,{flex:1,maxW:600,mt:4,form:l,isLoading:a,type:"submit",variant:"primary",children:"Mint"}):e.jsx(p,{flex:1,maxW:600,mt:4,onClick:t,variant:"primary",children:"Connect Wallet"})]})};export{ie as default};
