import{j as e,ay as P,az as M,aA as W,aB as B,aC as R,aD as U,b4 as F,b as p,a$ as Y,r as S,k as V,b1 as $,by as q,b3 as Q,B as x,C as H,V as _,T as h,cC as f,aI as X,bI as w,bm as O,l as z,F as b,ba as k,o as G,N as J,cD as K,b8 as Z,Z as ee,b6 as se,$ as ne,a0 as D,cE as oe,cF as ie,cG as te,cH as re,cI as ae,cJ as ce,cK as le,O as de,D as I}from"./index--6gyeIm1.js";import{I as xe}from"./InvoicesProjectInfo-CTmJCLit.js";import{S as A}from"./Card-uYMgTIS2.js";import{V as he}from"./VerticalDotsIcon16-RC_uRROt.js";import{D as ue}from"./DeleteIcon24-BKHrrW2Y.js";import{O as pe,a as g,U as me}from"./list-DJsRQ8jn.js";import{C as T,a as je}from"./CardLink-DTfs6OOe.js";import{T as ye,a as be,b as N,c as ve,d as E}from"./tab-panels-DLu8u9kl.js";import"./card-Csp8xPXk.js";import"./card-header-Bk90WjMF.js";import"./card-body-B5KnP0ef.js";const fe=({isOpen:n,onClose:s,onRegenerateToken:i,isLoading:o=!1})=>{const t=()=>i().then(s);return e.jsxs(P,{isOpen:n,onClose:s,scrollBehavior:"inside",size:"md",children:[e.jsx(M,{}),e.jsxs(W,{children:[e.jsx(B,{children:"Regenerate the token?"}),e.jsx(R,{}),e.jsx(U,{pt:"0",pb:"2",children:"If you regenerate the token, the previous token will no longer work"}),e.jsxs(F,{gap:"3",pt:"4",children:[e.jsx(p,{flex:1,onClick:s,variant:"secondary",children:"Cancel"}),e.jsx(p,{flex:1,isLoading:o,onClick:t,variant:"primary",children:"Confirm"})]})]})]})},ge=({isOpen:n,onClose:s,onAddWebhook:i,isLoading:o=!1})=>{const{formState:t,register:a,handleSubmit:c,reset:r,watch:l,setFocus:d}=Y(),m=S.useId(),j=l("value"),v=c(async u=>{await i(u.value),s(),setTimeout(r,1e3)});return S.useEffect(()=>{n?setTimeout(()=>d("value")):j||r()},[n,j,d,r]),e.jsxs(P,{isOpen:n,onClose:s,scrollBehavior:"inside",children:[e.jsx(M,{}),e.jsxs(W,{children:[e.jsx(R,{}),e.jsx(B,{children:e.jsx(V,{children:"Add webhook"})}),e.jsx(U,{children:e.jsx("form",{noValidate:!0,id:m,onSubmit:v,children:e.jsxs($,{isInvalid:!!t.errors.value,children:[e.jsx(q,{autoComplete:"off",placeholder:"https://myapp.com/api/invoice-change",...a("value",{required:"This field is required",pattern:{value:/^https?:\/\/.+/,message:"Wrong URL format"}})}),e.jsx(Q,{children:t.errors.value&&t.errors.value.message})]})})}),e.jsxs(F,{gap:"3",children:[e.jsx(p,{flex:1,onClick:s,variant:"secondary",children:"Cancel"}),e.jsx(p,{flex:1,form:m,isLoading:o,type:"submit",variant:"primary",children:"Save"})]})]})]})},y=({header:n,stats:s,getValue:i,loading:o})=>o?e.jsx(A,{header:n,value:"",loading:!0}):e.jsx(A,{header:n,value:s?i(s):"",loading:!1}),L=({stats:n,currency:s,loading:i})=>e.jsxs(e.Fragment,{children:[e.jsx(h,{textStyle:"label2",color:"text.secondary",children:s}),e.jsxs(X,{gap:"6",templateColumns:"repeat(auto-fit, minmax(200px, 1fr))",mt:2,mb:6,children:[e.jsx(y,{header:"Total Number of Invoices",stats:n,loading:i,getValue:o=>w(o.totalInvoices,{roundingMode:O.ROUND_DOWN})}),e.jsx(y,{header:"Active Invoices",stats:n,loading:i,getValue:o=>w(o.invoicesInProgress,{roundingMode:O.ROUND_DOWN})}),e.jsx(y,{header:"Earned Total",stats:n,loading:i,getValue:o=>o.earnedTotal.stringCurrencyAmount}),e.jsx(y,{header:"Earned Last 7 Days",stats:n,loading:i,getValue:o=>o.earnedLastWeek.stringCurrencyAmount}),e.jsx(y,{header:"Pending Payment",stats:n,loading:i,getValue:o=>o.awaitingForPaymentAmount.stringCurrencyAmount})]})]}),Ce=({data:n,isLoading:s=!1,...i})=>s?e.jsx(x,{...i,children:e.jsx(H,{h:"200px",children:e.jsx(_,{})})}):e.jsxs(x,{...i,children:[e.jsx(h,{textStyle:"label1",my:5,children:"Statistics"}),e.jsx(L,{stats:n==null?void 0:n[f.TON],currency:f.TON,loading:s}),e.jsx(L,{stats:n==null?void 0:n[f.USDT],currency:f.USDT,loading:s})]}),Ie=({app:n,token:s,onRegenerateToken:i,isRegeneratingToken:o,isTokenLoading:t,...a})=>{const{isOpen:c,onClose:r,onOpen:l}=z();return n?e.jsxs(x,{...a,children:[e.jsx(h,{textStyle:"label1",mb:"1",children:"Authorization"}),e.jsx(h,{textStyle:"body2",mb:"2",children:"Token"}),e.jsxs(b,{gap:"3",mb:"2",children:[e.jsx(k,{isLoading:t,flex:"1",breakAll:!0,text:s||""}),e.jsx(p,{h:"auto",isDisabled:!s,isLoading:o,onClick:l,variant:"secondary",children:"Generate"}),e.jsx(fe,{isOpen:c,onClose:r,onRegenerateToken:i,isLoading:o})]}),e.jsx(h,{textStyle:"body2",mb:"4",color:"text.secondary",children:"Token-based authentication is a protocol which allows for identity verification and offers the second layer of security. The token is secret, don't reveal it to any third party. If your token was compromised, generate a new one."})]}):null},Te=({webhook:n,isDeleting:s,onDelete:i})=>{const{hasCopied:o,onCopy:t}=Z(n.value);return e.jsx(g,{children:e.jsxs(b,{align:"center",gap:"3",pl:"2",children:[e.jsx(G,{color:"text.primary",fontFamily:"mono",children:n.value}),e.jsxs(ee,{closeOnSelect:!1,placement:"right-start",children:[e.jsx(se,{children:e.jsx(he,{display:"block"})}),e.jsxs(ne,{w:"126px",children:[e.jsxs(D,{alignItems:"center",gap:"2",display:"flex",onClick:t,children:[e.jsx(oe,{color:"icon.primary"}),o?"Copied":"Copy"]}),e.jsxs(D,{pos:"relative",isDisabled:s,onClick:()=>i(n.id),children:[e.jsxs(b,{align:"center",gap:"2",opacity:s?"0.3":1,children:[e.jsx(ue,{}),"Delete"]}),s&&e.jsx(H,{pos:"absolute",top:"0",right:"0",bottom:"0",left:"0",children:e.jsx(_,{size:"sm"})})]})]})]})]})})},ke=({webhooks:n=[],onAddWebhook:s,onDeleteWebhook:i,isDeletingWebhook:o=!1,isAddingWebhook:t=!1,...a})=>{const{isOpen:c,onClose:r,onOpen:l}=z();return e.jsxs(x,{...a,children:[e.jsx(ge,{isOpen:c,onClose:r,onAddWebhook:s,isLoading:t}),e.jsxs(b,{children:[e.jsxs(x,{children:[e.jsx(h,{textStyle:"label1",mb:"1",children:"Webhooks"}),e.jsxs(b,{gap:"3",mb:"5",children:[e.jsx(G,{textStyle:"body2",color:"text.secondary",children:"Handle invoices statuses change on your backend with webhooks"}),e.jsx(J,{color:"accent.blue",href:K.WEBHOOKS,isExternal:!0,children:"Documentation"})]})]}),e.jsx(p,{ml:"auto",isLoading:t,onClick:l,variant:"secondary",children:"+ Add"})]}),!!n.length&&e.jsx(pe,{color:"text.secondary",spacing:"3",children:n.map(d=>e.jsx(Te,{webhook:d,isDeleting:o,onDelete:i},d.id))})]})},Se=({app:n,...s})=>n?e.jsxs(x,{...s,children:[e.jsxs(ye,{mb:"4",isLazy:!0,children:[e.jsxs(be,{w:"auto",mx:"-6",pl:"6",children:[e.jsx(N,{children:"Create Invoice"}),e.jsx(N,{children:"GET Invoice"})]}),e.jsxs(ve,{children:[e.jsxs(E,{children:[e.jsx(h,{textStyle:"body2",mb:"5",color:"text.secondary",children:'Creating an 1 TON invoice with life time of 30 minutes and description "Example description" with API using curl:'}),e.jsx(k,{whiteSpace:"pre-wrap",text:`curl -X POST https://tonconsole.com/api/v1/services/invoices/invoice \\
    -H 'Content-Type: application/json' \\
    -H 'Authorization: Bearer <YOUR_TOKEN>' \\
    -d '{"amount": "1000000", "life_time": 1800, "description": "Example description", "currency": "TON"}'`,iconAlign:"start",mb:"3"}),e.jsxs(x,{textStyle:"body2",mb:"4",color:"text.secondary",children:[e.jsx(x,{mb:"1",children:"Where body have properties:"}),e.jsxs(me,{listStyleType:'"-"',spacing:"1",children:[e.jsxs(g,{pl:"1",children:[e.jsx(T,{children:"amount"})," is an amount in nanoTONs (10^-9) for TON and microUSDTs (10^-6) for USDT to pay to the invoice"]}),e.jsxs(g,{pl:"1",children:[e.jsx(T,{children:"life_time"})," is the duration of the invoice validity in seconds"]}),e.jsxs(g,{pl:"1",children:[e.jsx(T,{children:"description (optional)"})," any description of the invoice, not visible for users"]})]})]})]}),e.jsxs(E,{children:[e.jsx(h,{textStyle:"body2",mb:"5",color:"text.secondary",children:"Get invoice information by its id with API using curl:"}),e.jsx(k,{whiteSpace:"pre-wrap",text:`curl -X GET https://tonconsole.com/api/v1/services/invoices/<INVOICE_ID> \\
    -H 'Content-Type: application/json' \\
    -H 'Authorization: Bearer <YOUR_TOKEN>'`,iconAlign:"start",mb:"3"})]})]})]}),e.jsx(je,{href:K.USAGE,mb:"1"})]}):null,Re=n=>{var r,l,d,m,j,v;const s=ie(),i=te((r=s.app)==null?void 0:r.id),o=re((l=s.app)==null?void 0:l.id),t=ae((d=s.app)==null?void 0:d.id),a=ce((m=s.app)==null?void 0:m.id),c=le((j=s.app)==null?void 0:j.id);return e.jsxs(de,{...n,children:[e.jsx(V,{mb:"1",children:"Overview"}),e.jsx(xe,{mb:"5",invoicesApp:s}),e.jsx(I,{w:"auto",mx:"-6",mb:"5"}),e.jsx(Ce,{mb:"6",data:o.data||void 0,isLoading:o.isLoading}),e.jsx(I,{w:"auto",mx:"-6",mb:"5"}),e.jsx(Ie,{app:s.app,token:i.data,onRegenerateToken:async()=>{await new Promise(u=>{c.mutate(void 0,{onSuccess:()=>u()})})},isRegeneratingToken:c.isPending,isTokenLoading:i.isLoading}),e.jsx(I,{w:"auto",mx:"-6",mb:"5"}),e.jsx(ke,{mb:"6",webhooks:(v=s.app)==null?void 0:v.webhooks,onAddWebhook:async u=>{await new Promise(C=>{t.mutate(u,{onSuccess:()=>C()})})},onDeleteWebhook:async u=>{await new Promise(C=>{a.mutate(u,{onSuccess:()=>C()})})},isDeletingWebhook:a.isPending,isAddingWebhook:t.isPending}),e.jsx(Se,{app:s.app})]})};export{Re as default};
