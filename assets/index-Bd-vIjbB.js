import{cc as r,bh as w,j as e,B as i,T as o,bv as b,ab as D,bk as y,bi as p,l as k,F as x,aM as j,b as I,cd as L,ce as $,o as C,L as N,cf as O,cg as W,aK as E,N as R,aI as P,V as U,R as S,U as g,ch as B,C as V,G as M,O as G,k as H,ci as _,D as m}from"./index-BCN26Ft_.js";import{S as z}from"./Card-DjvQip0-.js";import{D as F}from"./DeleteIcon24-Bd3bueMl.js";import{O as K,a as h,U as X}from"./list-D2sr8y6t.js";import{C as Y}from"./CardLink-CXh3WTVz.js";import{T as J,a as q,b as f,c as Q,d as v}from"./tab-panels-BFaL-foB.js";import{C as u}from"./code-DjpzS3La.js";import"./card-header-CLcn9s-r.js";const d=r(({header:s,stats:n,getValue:a,invoicesAppStore:t})=>{const l=t.statistics$.isResolved,c=l&&n;if(l&&!n)throw new Error("Stats are not resolved");return e.jsx(z,{header:s,value:c?a(n):"",loading:!c})}),T=({stats:s,currency:n,invoicesAppStore:a})=>e.jsxs(e.Fragment,{children:[e.jsx(o,{textStyle:"label2",color:"text.secondary",children:n}),e.jsxs(D,{gap:"6",templateColumns:"repeat(auto-fit, minmax(200px, 1fr))",mt:2,mb:6,children:[e.jsx(d,{header:"Total Number of Invoices",stats:s,invoicesAppStore:a,getValue:t=>y(t.totalInvoices,{roundingMode:p.ROUND_DOWN})}),e.jsx(d,{header:"Active Invoices",stats:s,invoicesAppStore:a,getValue:t=>y(t.invoicesInProgress,{roundingMode:p.ROUND_DOWN})}),e.jsx(d,{header:"Earned Total",stats:s,invoicesAppStore:a,getValue:t=>t.earnedTotal.stringCurrencyAmount}),e.jsx(d,{header:"Earned Last 7 Days",stats:s,invoicesAppStore:a,getValue:t=>t.earnedLastWeek.stringCurrencyAmount}),e.jsx(d,{header:"Pending Payment",stats:s,invoicesAppStore:a,getValue:t=>t.awaitingForPaymentAmount.stringCurrencyAmount})]})]}),Z=({invoicesAppStore:s,...n})=>{var a,t;return w(s.fetchInvoicesStatistics),e.jsxs(i,{...n,children:[e.jsx(o,{textStyle:"label1",my:5,children:"Statistics"}),e.jsx(T,{stats:(a=s.statistics$.value)==null?void 0:a.TON,currency:b.TON,invoicesAppStore:s}),e.jsx(T,{stats:(t=s.statistics$.value)==null?void 0:t.USDT,currency:b.USDT,invoicesAppStore:s})]})},A=r(Z),ee=({invoicesAppStore:s,...n})=>{const{isOpen:a,onClose:t,onOpen:l}=k();return e.jsxs(i,{...n,children:[e.jsx(o,{textStyle:"label1",mb:"1",children:"Authorization"}),e.jsx(o,{textStyle:"body2",mb:"2",children:"Token"}),e.jsxs(x,{gap:"3",mb:"2",children:[e.jsx(j,{isLoading:!s.appToken$.isResolved,flex:"1",wordBreak:"break-all",text:s.appToken$.value||""}),e.jsx(I,{h:"auto",isDisabled:!s.appToken$.isResolved,isLoading:s.regenerateAppToken.isLoading,onClick:l,variant:"secondary",children:"Generate"}),e.jsx(L,{invoicesAppStore:s,isOpen:a,onClose:t})]}),e.jsx(o,{textStyle:"body2",mb:"4",color:"text.secondary",children:"Token-based authentication is a protocol which allows for identity verification and offers the second layer of security. The token is secret, donâ€™t reveal it to any third party. If your token was compromised, generate a new one."})]})},se=r(ee),ne=r(({webhook:s,invoicesAppStore:n})=>{const{hasCopied:a,onCopy:t}=E(s.value);return e.jsx(h,{children:e.jsxs(x,{align:"center",gap:"3",pl:"2",children:[e.jsx(C,{color:"text.primary",fontFamily:"mono",children:s.value}),e.jsxs(R,{closeOnSelect:!1,placement:"right-start",children:[e.jsx(P,{children:e.jsx(U,{display:"block"})}),e.jsxs(S,{w:"126px",children:[e.jsxs(g,{alignItems:"center",gap:"2",display:"flex",onClick:t,children:[e.jsx(B,{color:"icon.primary"}),a?"Copied":"Copy"]}),e.jsxs(g,{pos:"relative",isDisabled:n.deleteWebhook.isLoading,onClick:()=>n.deleteWebhook(s.id),children:[e.jsxs(x,{align:"center",gap:"2",opacity:n.deleteWebhook.isLoading?"0.3":1,children:[e.jsx(F,{}),"Delete"]}),n.deleteWebhook.isLoading&&e.jsx(V,{pos:"absolute",top:"0",right:"0",bottom:"0",left:"0",children:e.jsx(M,{size:"sm"})})]})]})]})]})})}),te=({invoicesAppStore:s,...n})=>{const{isOpen:a,onClose:t,onOpen:l}=k();return e.jsxs(i,{...n,children:[e.jsx($,{invoicesAppStore:s,isOpen:a,onClose:t}),e.jsxs(x,{children:[e.jsxs(i,{children:[e.jsx(o,{textStyle:"label1",mb:"1",children:"Webhooks"}),e.jsxs(x,{gap:"3",mb:"5",children:[e.jsx(C,{textStyle:"body2",color:"text.secondary",children:"Handle invoices statuses change on your backend with webhooks"}),e.jsx(N,{color:"accent.blue",href:O.WEBHOOKS,isExternal:!0,children:"Documentation"})]})]}),e.jsx(I,{ml:"auto",isLoading:s.addWebhook.isLoading,onClick:l,variant:"secondary",children:"+ Add"})]}),!!s.invoicesApp$.value.webhooks.length&&e.jsx(K,{color:"text.secondary",spacing:"3",children:s.invoicesApp$.value.webhooks.map(c=>e.jsx(ne,{webhook:W(c),invoicesAppStore:s},c.id))})]})},ae=r(te),oe=({invoicesAppStore:s,...n})=>e.jsxs(i,{...n,children:[e.jsxs(J,{mb:"4",isLazy:!0,children:[e.jsxs(q,{w:"auto",mx:"-6",pl:"6",children:[e.jsx(f,{children:"Create Invoice"}),e.jsx(f,{children:"GET Invoice"})]}),e.jsxs(Q,{children:[e.jsxs(v,{children:[e.jsx(o,{textStyle:"body2",mb:"5",color:"text.secondary",children:'Creating an 1 TON invoice with life time of 30 minutes and description "Example description" with API using curl:'}),e.jsx(j,{isLoading:!s.appToken$.isResolved,whiteSpace:"pre-wrap",text:`curl -X POST https://tonconsole.com/api/v1/services/invoices/invoice \\
    -H 'Content-Type: application/json' \\
    -H 'Authorization: Bearer ${s.appToken$.value}' \\
    -d '{"amount": "1000000", "life_time": 1800, "description": "Example description", "currency": "USDT"}'`,iconAlign:"start",mb:"3"}),e.jsxs(i,{textStyle:"body2",mb:"4",color:"text.secondary",children:[e.jsx(i,{mb:"1",children:"Where body have properties:"}),e.jsxs(X,{listStyleType:'"-"',spacing:"1",children:[e.jsxs(h,{pl:"1",children:[e.jsx(u,{children:"amount"})," is an amount in nanoTONs (10^-9) for TON and microUSDTs (10^-6) for USDT to pay to the invoice"]}),e.jsxs(h,{pl:"1",children:[e.jsx(u,{children:"life_time"})," is the duration of the invoice validity in seconds"]}),e.jsxs(h,{pl:"1",children:[e.jsx(u,{children:"description (optional)"})," any description of the invoice, not visible for users"]})]})]})]}),e.jsxs(v,{children:[e.jsx(o,{textStyle:"body2",mb:"5",color:"text.secondary",children:"Get invoice information by its id with API using curl:"}),e.jsx(j,{isLoading:!s.appToken$.isResolved,whiteSpace:"pre-wrap",text:`curl -X GET https://tonconsole.com/api/v1/services/invoices/<INVOICE_ID> \\
    -H 'Content-Type: application/json' \\
    -H 'Authorization: Bearer ${s.appToken$.value}'`,iconAlign:"start",mb:"3"})]})]})]}),e.jsx(Y,{href:O.USAGE,mb:"1"})]}),ie=r(oe),re=({invoicesAppStore:s,...n})=>e.jsxs(G,{...n,children:[e.jsx(H,{mb:"1",children:"Overview"}),e.jsx(_,{mb:"5",invoicesAppStore:s}),e.jsx(m,{w:"auto",mx:"-6",mb:"5"}),e.jsx(A,{mb:"6",invoicesAppStore:s}),e.jsx(m,{w:"auto",mx:"-6",mb:"5"}),e.jsx(se,{invoicesAppStore:s}),e.jsx(m,{w:"auto",mx:"-6",mb:"5"}),e.jsx(ae,{mb:"6",invoicesAppStore:s}),e.jsx(ie,{invoicesAppStore:s})]}),be=r(re);export{be as default};
