import{aP as he,j as e,B as u,F as m,C as N,aQ as je,aR as ye,r as b,aS as me,q as k,aT as D,a3 as R,aU as E,aV as S,aW as ne,aX as be,aY as fe,aZ as ge,a_ as we,a$ as Ce,T as c,N as z,b0 as Y,aK as Se,b1 as ke,b2 as ve,b3 as Pe,o as y,b as x,ay as G,az as $,aA as U,aB as L,aC as _,aD as F,b4 as q,l as T,b5 as Me,Z as Te,b6 as Ae,b7 as Ie,$ as De,a0 as Re,b8 as Ee,b9 as Ue,ba as K,bb as Le,d as _e,D as H,bc as Fe,bd as qe,be as Be,bf as Oe,bg as Ve,bh as We,U as re,bi as X,bj as Qe,bk as Ke,bl as Ne,bm as ze,k as Z,a4 as He,V as ae,bn as Ge,bo as $e,O as oe,p as Xe,S as ie}from"./index--6gyeIm1.js";import{V as Ye}from"./VerticalDotsIcon16-RC_uRROt.js";import{D as Ze}from"./DeleteIcon24-BKHrrW2Y.js";import{C as le}from"./card-Csp8xPXk.js";import{C as ce}from"./card-body-B5KnP0ef.js";import{C as A,a as Je}from"./CardLink-DTfs6OOe.js";import{T as et,a as tt,b as ee,c as st,d as te}from"./tab-panels-DLu8u9kl.js";import{U as se,a as I}from"./list-DJsRQ8jn.js";const nt=t=>{const{radioProps:s,rest:n}=rt(t),{getInputProps:r,getRadioProps:a}=he(s),i=r(),o=a();return e.jsxs(u,{as:"label",...n,children:[e.jsx("input",{...i}),e.jsxs(m,{...o,gap:"2",py:"3",pr:"5",pl:"3",border:"1px",borderColor:"separator.common",borderRadius:"md",_checked:{bg:"background.contentTint"},cursor:"pointer",transition:"background 0.1s linear",children:[e.jsx(N,{w:"6",h:"6",children:e.jsx(N,{w:"18px",h:"18px",bg:"transparent",border:"1px",borderColor:"icon.secondary",borderRadius:"100%",boxSizing:"border-box",children:e.jsx(u,{as:je,w:"18px",h:"18px",in:!!(s!=null&&s.isChecked),children:e.jsx(ye,{display:"block"})})})}),t.children]})]})};function rt(t){if(!t)return{radioProps:void 0};const{id:s,name:n,value:r,isChecked:a,defaultChecked:i,isDisabled:o,isFocusable:l,isReadOnly:d,isInvalid:h,isRequired:v,onChange:f,"data-radiogroup":p,"aria-describedby":M,...g}=t;return{radioProps:{id:s,name:n,value:r,isChecked:a,defaultChecked:i,isDisabled:o,isFocusable:l,isReadOnly:d,isInvalid:h,isRequired:v,onChange:f,"data-radiogroup":p,"aria-describedby":M},rest:g}}function at(t,s,n,r){const[i,o]=b.useState("idle"),[l,d]=b.useState(void 0),{clearErrors:h,setError:v,formState:f,getFieldState:p,watch:M}=t,{error:g}=p(s,f),w=M(s);return b.useEffect(()=>{let j=!1;return o("idle"),d(void 0),(async()=>{if(!g&&w){if(h(s),await new Promise(W=>setTimeout(W,500)),j)return;o("validating");const P=await n(w);if(!j){if(!P){o("succeed");return}P&&"success"in P&&P.success?(d(P.result),o("succeed")):(v(s,P),o("idle"))}}})(),()=>{j=!0}},[g,w,h,v,n]),[i,l]}const de=async t=>{const s=new TextEncoder().encode(t),r=`https://c.tonapi.io/json?url=${btoa(String.fromCharCode(...s))}`,a=await me.get(r),i=a.data.url;if(!i||typeof i!="string")throw new Error("Cannot parse response");let o;"name"in a.data&&a.data.name&&typeof a.data.name=="string"&&(o=a.data.name);let l;return"iconUrl"in a.data&&a.data.iconUrl&&typeof a.data.iconUrl=="string"&&(l=a.data.iconUrl),{url:i,...o&&{name:o},...l&&{image:l}}},ot=async t=>{try{return{success:!0,result:await de(t)}}catch{return{message:"Cannot fetch manifest"}}},B={all:()=>["dapps"],byProject:t=>[...B.all(),"project",t]};function it(t){return t.verify}function lt(t){const s={id:t.id,url:t.url,creationDate:new Date(t.date_create)};return t.name&&(s.name=t.name),t.image&&(s.image=t.image),s}async function ct(t){const{data:s,error:n}=await we({query:{project_id:t}});if(n)throw n;return s.items.filter(it).map(lt)}function O(){const t=k();return D({queryKey:B.byProject(t),queryFn:async()=>t?ct(t):[],enabled:!!t,staleTime:5*60*1e3})}function dt(){const t=R(),s=k();return E({mutationFn:async n=>{const r=s;if(!r)throw new Error("Project not selected");let a=n;if(!n.name||!n.image)try{const l=await de(ne(n.url,"tonconnect-manifest.json"));a={...n,name:l.name,image:l.image}}catch{}const{data:i,error:o}=await be({query:{project_id:r},body:a});if(o)throw o;return{...a,token:i.payload,validUntil:new Date(i.valid_until*1e3),_projectId:r}},onSuccess:n=>{t.invalidateQueries({queryKey:B.byProject(n._projectId)}),S().toast({title:"App created successfully",description:"Please verify it to complete registration",status:"success",duration:5e3,isClosable:!0})},onError:n=>{S().toast({title:"Failed to create app",description:n instanceof Error?n.message:"Unknown error",status:"error",duration:5e3,isClosable:!0})}})}function ut(){const t=R(),s=k();return E({mutationFn:async n=>{const r=s;if(!r)throw new Error("Project not selected");const{error:a}=await fe({query:{project_id:r},body:{payload:n}});if(a)throw a;return{_projectId:r}},onSuccess:n=>{t.invalidateQueries({queryKey:B.byProject(n._projectId)}),S().toast({title:"Dapp validated successfully",status:"success",duration:5e3,isClosable:!0})},onError:()=>{S().toast({title:"Dapp validation error",description:"Make sure you put the file to your webserver",status:"error",duration:5e3,isClosable:!0})}})}function pt(){const t=R(),s=k();return E({mutationFn:async n=>{const r=s;if(!r)throw new Error("Project not selected");const{error:a}=await ge({query:{app_id:n}});if(a)throw a;return{_projectId:r}},onSuccess:n=>{t.invalidateQueries({queryKey:B.byProject(n._projectId)}),S().toast({title:"Dapp deleted successfully",status:"success",duration:5e3,isClosable:!0})},onError:()=>{S().toast({title:"Dapp wasn't deleted",status:"error",duration:5e3,isClosable:!0})}})}const xt={manifest:"TonConnect Manifest URL"},ht=({onSubmit:t,validator:s,submitButtonLoading:n,...r})=>{const a=Ce({mode:"onChange"}),{handleSubmit:i,register:o,getFieldState:l,formState:{errors:d,isDirty:h,isValid:v}}=a,[f,p]=at(a,"manifest",s),M=f!=="succeed",{isTouched:g}=l("manifest"),{isTouched:w}=l("url"),j=b.useRef(g),V=b.useRef(w);b.useEffect(()=>{g&&(j.current=!0)},[g]),b.useEffect(()=>{w&&(V.current=!0)},[w]);const P=b.useCallback(W=>{if(W.url)return t({url:W.url});if(p)return t(p);throw new Error("App url form error: appUrl is not specified as well as manifestUrl")},[p,t]);return e.jsxs(u,{...r,children:[e.jsx(c,{textStyle:"label1",mb:"6",color:"text.primary",children:"Registration"}),e.jsxs(m,{align:"center",justify:"space-between",children:[e.jsx(c,{textStyle:"label2",mr:"2",color:"text.primary",children:xt.manifest}),e.jsx(z,{textStyle:"label2",color:"text.accent",href:Y.APP_URL_DOCUMENTATION,isExternal:!0,children:"Documentation"})]}),e.jsxs(Se.form,{noValidate:!0,onSubmit:i(P),children:[e.jsxs(ke,{mb:"5",isInvalid:!!d.manifest,children:[e.jsx(ve,{autoComplete:"off",placeholder:"https://yourapp.com/tonconnect-manifest.json",validationState:f,...o("manifest",{required:"Required",pattern:{value:/^https?:\/\/.+/,message:"Wrong URL format"}})}),e.jsx(Pe,{children:d.manifest&&d.manifest.message})]}),!!(p!=null&&p.url)&&e.jsxs(c,{textStyle:"body2",mb:"4",color:"text.secondary",children:["App url",e.jsx(y,{textStyle:"body2",fontFamily:"mono",color:"text.primary",ml:"4",children:p==null?void 0:p.url})]}),e.jsx(x,{isDisabled:!h||!v||M,isLoading:n,type:"submit",children:"Register"})]})]})},jt=({appUrl:t,...s})=>e.jsxs(G,{scrollBehavior:"inside",size:"md",...s,children:[e.jsx($,{}),e.jsxs(U,{children:[e.jsx(L,{textAlign:"center",children:"Are you sure you want to reset the form?"}),e.jsx(_,{}),e.jsx(F,{pb:"0",children:e.jsxs(c,{textStyle:"text.body2",mb:"6",color:"text.secondary",textAlign:"center",children:["Reset ",t,"?"]})}),e.jsxs(q,{gap:"3",children:[e.jsx(x,{flex:1,onClick:()=>s.onClose(),variant:"secondary",children:"Cancel"}),e.jsx(x,{flex:1,onClick:()=>s.onClose(!0),type:"submit",variant:"primary",children:"Reset"})]})]})]}),yt=({appUrl:t,...s})=>e.jsxs(G,{scrollBehavior:"inside",size:"md",...s,children:[e.jsx($,{}),e.jsxs(U,{children:[e.jsx(L,{textAlign:"center",children:"Remove your app?"}),e.jsx(_,{}),e.jsx(F,{pb:"0",children:e.jsx(c,{textStyle:"text.body2",mb:"6",color:"text.secondary",textAlign:"center",children:t})}),e.jsxs(q,{gap:"3",children:[e.jsx(x,{flex:1,onClick:()=>s.onClose(),variant:"secondary",children:"Cancel"}),e.jsx(x,{flex:1,onClick:()=>s.onClose(!0),type:"submit",variant:"primary",children:"Remove"})]})]})]}),ue=({dapp:t,withMenu:s,...n})=>{const{isOpen:r,onOpen:a,onClose:i}=T(),o=pt(),l=d=>{i(),d&&t.id!==void 0&&typeof t.id=="number"&&o.mutate(t.id)};return e.jsxs(e.Fragment,{children:[e.jsx(le,{w:"fit-content",maxW:"100%",...n,children:e.jsxs(ce,{alignItems:"center",gap:"3",display:"flex",px:"4",py:"4",children:[e.jsx(Me,{borderRadius:"sm",w:"12",h:"12",minW:"12",src:t.image}),e.jsxs(u,{children:[e.jsx(c,{textStyle:"label2",mb:"2",color:"text.primary",fontFamily:"mono",wordBreak:"break-word",noOfLines:1,children:t.url}),e.jsx(c,{textStyle:"label2",color:"text.secondary",wordBreak:"break-word",noOfLines:1,children:t.name})]}),s&&e.jsxs(Te,{placement:"bottom-end",children:[e.jsx(Ae,{as:Ie,alignSelf:"flex-start",h:"4","aria-label":"options",icon:e.jsx(Ye,{})}),e.jsx(De,{w:"132px",children:e.jsxs(Re,{onClick:a,children:[e.jsx(Ze,{mr:"2"}),e.jsx(c,{textStyle:"label2",fontFamily:"body",children:"Remove"})]})})]})]})}),e.jsx(yt,{appUrl:t.url,isOpen:r,onClose:l})]})},mt=({pendingDapp:t,onReset:s,...n})=>{const{isOpen:r,onOpen:a,onClose:i}=T(),o=l=>{i(),l&&s()};return e.jsxs(u,{...n,children:[e.jsx(c,{textStyle:"label1",mb:"3",color:"text.primary",children:"Your app"}),e.jsx(ue,{maxW:"600px",mb:"4",dapp:t}),e.jsx(x,{onClick:a,variant:"secondary",children:"Remove"}),e.jsx(jt,{appUrl:t.url,isOpen:r,onClose:o})]})},bt=({pendingDapp:t,onSubmit:s,submitLoading:n,...r})=>{const a="tc-verify.json",i=ne(t.url,"tc-verify.json"),{onCopy:o,hasCopied:l}=Ee(a);return e.jsxs(u,{...r,children:[e.jsx(c,{textStyle:"label1",mb:"3",color:"text.primary",children:"Verification"}),e.jsxs(c,{textStyle:"body2",mb:"2",color:"text.secondary",children:["We need you to verify ownership of domain ",t.url,". Please follow the steps below to prove the ownership."]}),e.jsxs(c,{textStyle:"body2",mb:"2",color:"text.secondary",children:["Create a JSON file"," ",e.jsx(Ue,{isOpen:l,label:"Copied",children:e.jsx(y,{cursor:"pointer",onClick:o,fontFamily:"mono",children:a})})," ","copy and paste content below:"]}),e.jsx(c,{textStyle:"label1",mb:"3",color:"text.primary",children:"Payload Key"}),e.jsx(K,{whiteSpace:"pre-wrap",mb:"2",iconAlign:"start",text:`{
    "payload": "`+t.token+`"
}`}),e.jsxs(c,{textStyle:"body2",mb:"2",color:"text.secondary",children:["Make sure the file is available at"," ",e.jsx(z,{textStyle:"label2",href:i,isExternal:!0,children:i})]}),e.jsxs(z,{textStyle:"label2",alignItems:"center",gap:"2",display:"flex",mb:"4",href:Y.VALIDATION_DOCUMENTATION,isExternal:!0,children:[e.jsx(Le,{}),e.jsx(y,{children:"See step-by-step guide"})]}),e.jsxs(m,{gap:"3",children:[e.jsx(x,{isLoading:n,onClick:s,children:"Verify"}),e.jsx(_e,{variant:"secondary",isExternal:!0,href:Y.GET_HELP,children:"Help"})]})]})},ft=()=>{const[t,s]=b.useState(null),n=dt(),r=ut(),a=async l=>{try{const d=await n.mutateAsync(l);s(d)}catch{}},i=async()=>{if(t)try{await r.mutateAsync(t.token),s(null)}catch{}},o=()=>{s(null)};return t?e.jsxs(e.Fragment,{children:[e.jsx(mt,{maxW:"800px",px:"6",mb:"5",pendingDapp:t,onReset:o}),e.jsx(H,{mb:"4"}),e.jsx(bt,{maxW:"850px",px:"6",pendingDapp:t,onSubmit:i,submitLoading:r.isPending})]}):e.jsx(ht,{maxW:"800px",px:"6",onSubmit:a,submitButtonLoading:n.isPending,validator:ot})},gt=t=>{const{data:s}=O(),n=s==null?void 0:s[0];return n?e.jsx(ue,{...t,dapp:n}):null};var J=(t=>(t.BUSINESS_DESCRIPTION="https://docs.tonconsole.com/tonconsole/tonkeeper-messages",t.USAGE="https://docs.tonconsole.com/tonconsole/tonkeeper-messages",t))(J||{});const C={all:()=>["messages"],packages:()=>[...C.all(),"packages"],balance:t=>[...C.all(),"balance",t],stats:t=>[...C.all(),"stats",t],token:t=>[...C.all(),"token",t]};function wt(t){return{messagesIncluded:t.limits,price:new re(t.usd_price),name:t.name,id:t.id}}function Ct(){return D({queryKey:C.packages(),queryFn:async()=>{const{data:t,error:s}=await Be();if(s)throw s;return t.items.map(wt)},staleTime:10*60*1e3})}function pe(){const t=k();return D({queryKey:C.balance(t),queryFn:async()=>{if(!t)return 0;const{data:s,error:n}=await Oe({query:{project_id:t}});if(n)throw n;return s.balance},enabled:!!t,staleTime:1*60*1e3})}function St(t){const s=k();return D({queryKey:C.stats(t),queryFn:async()=>{if(!t||!s)return null;const{data:n,error:r}=await Ve({query:{app_id:t}});if(r)throw r;return{totalUsers:n.stats.users,usersWithEnabledNotifications:n.stats.enable_notifications,sentNotificationsLastWeek:n.stats.sent_in_week}},enabled:!!t&&!!s,staleTime:5*60*1e3})}function kt(t){const s=k();return D({queryKey:C.token(t),queryFn:async()=>{if(!t||!s)return null;const{data:n,error:r}=await We({query:{app_id:t}});if(r)throw r;return n.token},enabled:!!t&&!!s,staleTime:5*60*1e3})}function vt(){const t=R(),s=k();return E({mutationFn:async n=>{const r=s;if(!r)throw new Error("Project not selected");const{error:a}=await qe({query:{project_id:r},body:{id:n}});if(a)throw a;return{_projectId:r}},onSuccess:n=>{t.invalidateQueries({queryKey:C.balance(n._projectId)}),S().toast({title:"Successful purchase",status:"success",duration:5e3,isClosable:!0})},onError:()=>{S().toast({title:"Unsuccessful purchase",status:"error",duration:5e3,isClosable:!0})}})}function xe(){const t=R(),s=k();return E({mutationFn:async n=>{const r=s;if(!r)throw new Error("Project not selected");const{error:a}=await Fe({query:{app_id:n}});if(a)throw a;return{_appId:n,_projectId:r}},onSuccess:n=>{t.invalidateQueries({queryKey:C.token(n._appId)}),S().toast({title:"Token regenerated successfully",status:"success",duration:5e3,isClosable:!0})},onError:()=>{S().toast({title:"Token regeneration error",status:"error",duration:5e3,isClosable:!0})}})}const Pt=({onClose:t,pkg:s})=>{const n=vt(),r=()=>{n.mutate(s.id,{onSuccess:t})};return e.jsxs(U,{children:[e.jsx(L,{children:"Details"}),e.jsx(_,{}),e.jsx(F,{pt:"0",pb:"2",children:e.jsx(le,{children:e.jsxs(ce,{textStyle:"body2",px:"6",py:"5",children:[e.jsxs(m,{justify:"space-between",mb:"3",children:[e.jsx(y,{color:"text.secondary",children:"Package"}),e.jsx(y,{children:s.name})]}),e.jsxs(m,{justify:"space-between",mb:"3",children:[e.jsx(y,{color:"text.secondary",children:"Includes"}),e.jsxs(y,{children:[X(s.messagesIncluded)," messages"]})]}),e.jsxs(m,{justify:"space-between",mb:"3",children:[e.jsx(y,{color:"text.secondary",children:"Type"}),e.jsx(y,{children:"One-time payment"})]}),e.jsxs(m,{justify:"space-between",children:[e.jsx(y,{color:"text.secondary",children:"Price"}),e.jsx(y,{children:s.price.stringCurrencyAmount})]})]})})}),e.jsxs(q,{gap:"3",pt:"4",children:[e.jsx(x,{flex:1,onClick:t,variant:"secondary",children:"Cancel"}),e.jsx(x,{flex:1,isLoading:n.isPending,onClick:r,variant:"primary",children:"Purchase"})]})]})},Mt=({isOpen:t,onClose:s})=>{var w;const{data:n=[]}=Ct(),[r,a]=b.useState(null),{getRootProps:i,getRadioProps:o}=Qe({name:"package",defaultValue:((w=n[0])==null?void 0:w.name)||"",onChange:j=>a(n.find(V=>V.name===j)||null)}),l=i(),d=Ke((r==null?void 0:r.price.amount)??null),h=d?Ne(d):BigInt(0),v=new re(new ze(h).div(1e6)),f=T(),p=T();b.useEffect(()=>{t||(f.onClose(),p.onClose())},[t]);const M=()=>{h?f.onOpen():p.onOpen()},g=e.jsxs(U,{children:[e.jsxs(L,{children:[e.jsx(Z,{mb:"1",children:"Pricing"}),e.jsx(c,{textStyle:"body2",color:"text.secondary",children:"It’s one-time payment"})]}),e.jsx(_,{}),e.jsxs(F,{pt:"0",pb:"2",children:[n.length>0?e.jsx(He,{...l,children:n.map(j=>e.jsx(nt,{w:"100%",...o({value:j.name}),children:e.jsxs(u,{w:"100%",children:[e.jsxs(m,{justify:"space-between",children:[e.jsx(c,{textStyle:"label1",children:j.name}),e.jsx(c,{textStyle:"label1",textAlign:"end",children:j.price.stringCurrencyAmount})]}),e.jsxs(c,{textStyle:"body2",color:"text.secondary",children:[X(j.messagesIncluded)," messages"]})]})},j.id))}):e.jsx(N,{h:"200px",children:e.jsx(ae,{})}),!!h&&e.jsxs(c,{textStyle:"body2",mt:"3",color:"text.secondary",children:[e.jsx(Ge,{})," Not enough ",v.stringCurrencyAmount," USDT to buy the plan, fund your account"]})]}),e.jsxs(q,{gap:"3",pt:"4",children:[e.jsx(x,{flex:1,onClick:s,variant:"secondary",children:"Cancel"}),e.jsx(x,{flex:1,onClick:M,variant:"primary",children:h?"Refill balance":"Choose"})]})]});return e.jsxs(G,{isOpen:t,onClose:s,scrollBehavior:"inside",size:"md",children:[e.jsx($,{}),f.isOpen?e.jsx($e,{onClose:s}):p.isOpen?e.jsx(Pt,{onClose:s,pkg:r}):g]})},Tt=({isOpen:t,onClose:s})=>{var o;const{data:n}=O(),r=(o=n==null?void 0:n[0])==null?void 0:o.id,a=xe(),i=()=>{r&&a.mutate(r,{onSuccess:s})};return e.jsxs(G,{isOpen:t,onClose:s,scrollBehavior:"inside",size:"md",children:[e.jsx($,{}),e.jsxs(U,{children:[e.jsx(L,{children:"Generate new token?"}),e.jsx(_,{}),e.jsx(F,{pt:"0",pb:"2",children:"If you generate new the token, the previous token will no longer work"}),e.jsxs(q,{gap:"3",pt:"4",children:[e.jsx(x,{flex:1,onClick:s,variant:"secondary",children:"Cancel"}),e.jsx(x,{flex:1,isLoading:a.isPending,onClick:i,variant:"primary",children:"Confirm"})]})]})]})},At=()=>e.jsxs(oe,{px:"0",children:[e.jsxs(u,{maxW:"800px",px:"6",children:[e.jsx(Z,{mb:"1",children:"Tonkeeper Messages"}),e.jsxs(c,{textStyle:"body2",mb:"5",color:"text.secondary",children:["Interact with users of your dapp through push messages inside Tonkeeper — an effective way to increase customer engagement and retention. ",e.jsx(z,{color:"accent.blue",href:J.BUSINESS_DESCRIPTION,isExternal:!0,children:"Learn more"})]})]}),e.jsx(H,{mb:"3"}),e.jsx(ft,{})]}),Q=({label:t,tooltip:s,value:n,isLoading:r})=>e.jsxs(m,{justify:"space-between",gap:"2",children:[e.jsxs(u,{children:[e.jsx(y,{textStyle:"body2",color:"text.secondary",children:t})," ",e.jsx(Xe,{children:s})]}),e.jsx(y,{textStyle:"body2",textAlign:"end",alignContent:"center",children:r?e.jsx(ie,{w:"100px",h:"3"}):n??"unknown"})]}),It=t=>{var d;const{data:s}=O(),n=(d=s==null?void 0:s[0])==null?void 0:d.id,{data:r,isLoading:a}=St(n??null),{data:i,isLoading:o}=pe(),l=a||o;return e.jsxs(m,{direction:"column",gap:"2",...t,children:[e.jsx(Q,{label:"All users",tooltip:"All dApp users with login by Tonkeeper and Ton Connect 2.0",value:r==null?void 0:r.totalUsers,isLoading:l}),e.jsx(Q,{label:"Enable notifications",tooltip:"Users who have allowed push notifications from your dApp",value:r==null?void 0:r.usersWithEnabledNotifications,isLoading:l}),e.jsx(Q,{label:"Available messages",tooltip:"Push messages balance that you can send to your users",value:i!==void 0?X(i):void 0,isLoading:l}),e.jsx(Q,{label:"Sent last 7 days",tooltip:"Messages with delivered to dApp users last 7 days",value:r==null?void 0:r.sentNotificationsLastWeek,isLoading:l})]})},Dt=t=>{var h;const{isOpen:s,onOpen:n,onClose:r}=T(),{data:a}=O(),i=(h=a==null?void 0:a[0])==null?void 0:h.id,{data:o,isLoading:l}=kt(i??null),d=xe();return e.jsxs(u,{...t,children:[e.jsxs(u,{px:"6",children:[e.jsx(c,{textStyle:"body2",mb:"2",children:"Token"}),e.jsxs(m,{gap:"3",mb:"2",children:[e.jsx(K,{isLoading:l,flex:"1",breakAll:!0,text:o||""}),e.jsx(x,{h:"auto",isDisabled:l,isLoading:d.isPending,onClick:n,variant:"secondary",children:"Generate"}),e.jsx(Tt,{isOpen:s,onClose:r})]}),e.jsxs(c,{textStyle:"body2",mb:"4",color:"text.secondary",children:["This token provides access to messages API, is should be used from backend side and never exposed into client side of the project.",e.jsx("br",{}),"To send push notification please add Authorization header with token to your push API request."]})]}),e.jsxs(et,{mb:"4",isLazy:!0,children:[e.jsxs(tt,{pl:"6",children:[e.jsx(ee,{children:"Message User"}),e.jsx(ee,{children:"Message All Users"})]}),e.jsxs(st,{px:"6",children:[e.jsxs(te,{children:[e.jsx(c,{textStyle:"label2",mb:"3",children:"Posting a message for user by wallet address with Curl:"}),e.jsx(K,{isLoading:l,whiteSpace:"pre-wrap",text:`curl -X POST
    https://tonconsole.com/api/v1/services/messages/push
    -H 'Content-Type: application/json'
    -H 'Authorization: Bearer ${o||""}'
    -d
    '{"message": "my_message", "addresses": ["EQ...ER", "EQ...ER"], "link": "http://my_dapp.com/event"}'`,iconAlign:"start",mb:"3"}),e.jsxs(u,{textStyle:"body2",color:"text.secondary",children:[e.jsx(u,{mb:"1",children:"Where body have properties:"}),e.jsxs(se,{listStyleType:'"-"',spacing:"1",children:[e.jsxs(I,{pl:"1",children:[e.jsx(A,{children:"address"})," is user's wallet address"]}),e.jsxs(I,{pl:"1",children:[e.jsx(A,{children:"message"})," is call to action message for user"]}),e.jsxs(I,{pl:"1",children:[e.jsx(A,{children:"link"})," for user action, the link will be opened in Tonkeeper dApp Browser"]})]})]})]}),e.jsxs(te,{children:[e.jsx(c,{textStyle:"label2",mb:"3",children:"Posting a message for all users with allow notifications with Curl:"}),e.jsx(K,{isLoading:l,whiteSpace:"pre-wrap",text:`curl -X POST
    https://tonconsole.com/api/v1/services/messages/push
    -H 'Content-Type: application/json'
    -H 'Authorization: Bearer ${o||""}'
    -d
    '{"message": "my_message", "link": "http://my_dapp.com/event"}'`,iconAlign:"start",mb:"3"}),e.jsxs(u,{textStyle:"body2",color:"text.secondary",children:[e.jsx(u,{mb:"1",children:"Where body have properties:"}),e.jsxs(se,{listStyleType:'"-"',spacing:"1",children:[e.jsxs(I,{pl:"1",children:[e.jsx(A,{children:"message"})," is call to action message for user"]}),e.jsxs(I,{pl:"1",children:[e.jsx(A,{children:"link"})," for user action, the link will be opened in Tonkeeper dApp Browser"]})]})]})]})]})]}),e.jsx(Je,{href:J.USAGE,mb:"1",mx:"6"})]})},Rt=t=>{const{isOpen:s,onOpen:n,onClose:r}=T(),{data:a,isLoading:i}=pe();return e.jsxs(u,{h:"fit-content",...t,children:[e.jsx(c,{textStyle:"label1",mb:"5",children:"Available messages"}),e.jsxs(m,{direction:"column",gap:"2",children:[i?e.jsx(ie,{w:"80px",h:"6"}):e.jsxs(c,{flex:"1",mb:"0",color:a===0?"accent.red":"text.primary",fontWeight:a===0?"bold":"normal",children:[X(a||0)," messages"]}),e.jsx(x,{w:"100%",onClick:n,size:"lg",variant:"primary",children:"Refill"})]}),e.jsx(Mt,{isOpen:s,onClose:r})]})},Et=()=>e.jsxs(oe,{px:"0",children:[e.jsxs(u,{mb:"6",px:"6",children:[e.jsx(Z,{mb:"5",children:"Tonkeeper Messages"}),e.jsx(gt,{withMenu:!0})]}),e.jsx(H,{}),e.jsxs(m,{justify:"space-between",gap:"6",mb:"6",px:"6",pt:"5",children:[e.jsxs(u,{children:[e.jsx(c,{textStyle:"label1",mb:"5",children:"Statistics"}),e.jsx(It,{maxW:"256px"})]}),e.jsx(Rt,{})]}),e.jsx(H,{}),e.jsxs(u,{pt:"5",children:[e.jsx(c,{textStyle:"label1",mb:"5",px:"6",children:"Authorization"}),e.jsx(Dt,{})]})]}),Wt=()=>{const{data:t,isLoading:s}=O();return s?e.jsx(N,{h:"200px",children:e.jsx(ae,{})}):t&&t.length>0?e.jsx(Et,{}):e.jsx(At,{})};export{Wt as default};
