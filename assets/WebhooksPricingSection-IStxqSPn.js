import{r as S,j as e,_ as I,bn as E,F as x,T as t,f as k,b as T,aA as V,aB as K,aC as Y,aD as _,k as Q,aE as Z,aF as J,bo as X,B as u,p as ee,bp as te,bq as se,aG as ne,Z as F,W as q,l as w,C as B,G as $,L,bm as oe,ab as P,ai as z,K as re,$ as ie,b9 as O}from"./index-BCN26Ft_.js";import{b as ce,c as ae,a as le,d as de}from"./queries-B6tpSeut.js";import{U as C}from"./usd-currency-amount-OKdR9Ymz.js";import{R as N}from"./RefillModal-peJOgeto.js";import{a as xe,b as ue,c as pe,d as he}from"./queries-DS3Ag-C4.js";import{C as ye}from"./card-header-CLcn9s-r.js";const M=({name:i,price:r,rps:s,priceDescription:c,isCurrent:n=!1,onSelect:d,buttonText:o="Choose",buttonVariant:a,...h})=>{const[m,g]=S.useState(!1);return e.jsxs(I,{pos:"relative",direction:"column",p:"2",border:n?"2px solid":"1px solid",borderColor:n?"text.secondary":"gray.200",transition:"all 0.2s",onMouseEnter:()=>g(!0),onMouseLeave:()=>g(!1),size:"xl",...h,children:[n&&e.jsx(E,{pos:"absolute",right:"0",bottom:"0",px:"3",py:"1",color:"white",fontSize:"xs",bg:"text.secondary",borderTopRightRadius:"0",borderTopLeftRadius:"md",borderBottomLeftRadius:"0",borderBottomRightRadius:"0",children:"Current"}),e.jsxs(x,{justify:"space-between",gap:"4",children:[e.jsxs(x,{direction:"column",flex:"1",children:[e.jsx(t,{textStyle:"label2",color:"text.secondary",children:i}),e.jsx(k,{fontSize:24,children:r}),c&&e.jsx(t,{textStyle:"body2",color:"text.secondary",children:c})]}),e.jsx(x,{justify:"center",children:m&&d?e.jsx(T,{alignSelf:"center",onClick:d,size:"lg",variant:a,children:o}):e.jsxs(x,{align:"flex-end",direction:"column",children:[e.jsx(t,{textStyle:"label2",color:"text.secondary",children:"RPS"}),e.jsx(k,{fontSize:24,children:s})]})})]})]})},W=({isOpen:i,onClose:r,tier:s,title:c,isLoading:n,onConfirm:d})=>{const o=s.unspentMoney,a=s.price||new C(s.usd_price||0),h=a.amount.eq(0),m=o&&o.isGTE(a),g=o?new C(a.amount.minus(o.amount)):a,f=h||m?new C(0):g,j=!s.type||s.type==="monthly",p=s.type==="pay-as-you-go";return e.jsxs(V,{isOpen:i,onClose:r,scrollBehavior:"inside",size:"md",children:[e.jsx(K,{}),e.jsxs(Y,{children:[e.jsxs(_,{children:[e.jsx(Q,{mb:"1",children:"Payment Details"}),e.jsx(t,{textStyle:"body2",color:"text.secondary",children:c})]}),e.jsx(Z,{}),e.jsxs(J,{py:"0",children:[e.jsxs(X,{mb:"4",children:[e.jsxs(x,{justify:"space-between",gap:"10",mb:"1",children:[e.jsx(t,{textStyle:"body2",color:"text.secondary",children:"Plan"}),e.jsx(t,{textStyle:"body2",color:"text.primary",children:s.name})]}),e.jsxs(x,{justify:"space-between",gap:"10",mb:"1",children:[e.jsx(t,{textStyle:"body2",color:"text.secondary",children:"Included"}),e.jsxs(t,{textStyle:"body2",color:"text.primary",textAlign:"right",children:[s.rps," RPS"]})]}),j&&e.jsxs(x,{justify:"space-between",gap:"10",mb:"1",children:[e.jsx(t,{textStyle:"body2",color:"text.secondary",children:"Period"}),e.jsx(t,{textStyle:"body2",color:"text.primary",children:"Monthly"})]}),p&&e.jsxs(x,{justify:"space-between",gap:"10",mb:"1",children:[e.jsx(t,{textStyle:"body2",color:"text.secondary",children:"Price Model"}),e.jsx(t,{textStyle:"body2",color:"text.primary",children:"per 1K requests"})]}),o&&e.jsxs(x,{justify:"space-between",gap:"10",mb:"1",children:[e.jsx(t,{textStyle:"body2",color:"text.secondary",children:"Price"}),e.jsx(u,{children:e.jsx(t,{textStyle:"body2",color:"text.primary",textAlign:"right",title:a.stringAmountWithoutRound,children:a.amount.eq(0)?"Free":a.stringCurrencyAmount})})]}),!m&&!h&&o&&e.jsxs(x,{justify:"space-between",gap:"10",mb:"1",children:[e.jsx(t,{textStyle:"body2",color:"text.secondary",children:"Unspent funds"}),e.jsx(t,{textStyle:"body2",color:"text.secondary",textAlign:"right",title:o.stringAmountWithoutRound,children:o.stringCurrencyAmount})]}),!p&&e.jsxs(x,{justify:"space-between",gap:"10",mb:"1",children:[e.jsx(t,{textStyle:"body2",color:"text.secondary",children:o?"Total":"Price"}),f.amount.eq(0)?e.jsxs(x,{align:"center",gap:1,children:[e.jsx(t,{textStyle:"body2",textAlign:"right",children:"Free"}),m&&!h&&e.jsx(ee,{children:e.jsx(u,{textStyle:"body2",maxW:"200px",children:"Your unspent money is enough to cover the cost of the plan"})})]}):e.jsx(t,{textStyle:"body2",color:"text.primary",textAlign:"right",title:f.stringAmountWithoutRound,children:f.stringCurrencyAmount})]})]}),j&&e.jsx(t,{textStyle:"body3",color:"text.secondary",children:"Your plan will renew automatically every month until cancelled."}),o&&g.amount.isNegative()&&j&&e.jsxs(te,{mt:"4",borderRadius:"md",status:"warning",variant:"subtle",children:[e.jsx(se,{}),e.jsxs(u,{children:[e.jsx(t,{textStyle:"body3",mb:"1",children:"You will be switched to the new tariff immediately"}),e.jsx(t,{textStyle:"body3",color:"text.secondary",children:"Remaining days of your current plan will be forfeited"})]})]})]}),e.jsxs(ne,{gap:"3",children:[e.jsx(T,{flex:1,onClick:r,variant:"secondary",children:"Cancel"}),e.jsx(T,{flex:1,isLoading:n,onClick:d,variant:"primary",children:"Confirm Purchase"})]})]})]})};W.displayName="PurchaseDialog";const G=({isOpen:i,onClose:r,selectedTier:s})=>{const c=F(),n=q(),{mutate:d,isPending:o}=ce(),a=S.useCallback(async()=>{d(s.id,{onSuccess:()=>{c.invalidateQueries({queryKey:["balance",n]}),r()}})},[s,c,n,r,d]);return e.jsx(W,{isOpen:i,onClose:r,tier:s,title:`Upgrade to TON API ${s.name} Plan`,isLoading:o,onConfirm:a})};G.displayName="RestApiPurchaseDialog";const Re=()=>{const[i,r]=S.useState(null),{data:s,isLoading:c}=ae(),{data:n}=le(),{mutateAsync:d}=de(),{isOpen:o,onOpen:a,onClose:h}=w(),{isOpen:m,onOpen:g,onClose:f}=w(),j=n==null?void 0:n.id,p=async l=>{if(j===l.id)return;const{valid:A,unspent_money:R}=await d(l.id);if(!A){g();return}const H=R?new C(R):void 0;r({...l,unspentMoney:H}),a()};if(c||!s)return e.jsx(B,{py:"8",children:e.jsx($,{})});const v=[...s].sort((l,y)=>l.type==="monthly"&&y.type==="pay-as-you-go"?-1:l.type==="pay-as-you-go"&&y.type==="monthly"?1:0);return e.jsxs(e.Fragment,{children:[e.jsxs(u,{mb:"8",children:[e.jsxs(x,{align:"baseline",direction:"column",gap:"2",mb:"4",children:[e.jsx(t,{textStyle:"h4",fontWeight:600,children:"REST API"}),e.jsxs(t,{textStyle:"body2",color:"text.secondary",children:["Access TON blockchain data via REST API."," ",e.jsx(L,{as:oe,color:"accent.blue",to:"/tonapi/api-keys",children:"Get API keys"})," ","or explore the"," ",e.jsx(L,{color:"accent.blue",href:"https://docs.tonconsole.com/tonapi/rest-api",isExternal:!0,children:"API documentation"})]})]}),e.jsxs(P,{gap:"4",templateColumns:"repeat(auto-fit, minmax(230px, 1fr))",children:[v.map(l=>{const y=j===l.id,A=l.price.amount.eq(0),R=l.type==="pay-as-you-go";return e.jsx(M,{name:l.name,price:A?"$0":l.price.stringCurrencyAmount,rps:l.rps,priceDescription:R?"per 1K requests":l.type==="monthly"?"Monthly":void 0,isCurrent:y,onSelect:y?void 0:()=>p(l)},l.id)}),e.jsx(M,{name:"Custom",price:"Custom",rps:"∞",priceDescription:"Contact us",onSelect:z("unlimited-restapi"),buttonText:"Request",buttonVariant:"contrast"})]})]}),i&&e.jsx(G,{isOpen:o,onClose:h,selectedTier:i}),e.jsx(N,{isOpen:m,onClose:f})]})},U=({isOpen:i,onClose:r,selectedTier:s})=>{const c=q(),n=F(),{mutateAsync:d,isPending:o}=xe(),a=S.useCallback(async()=>{await d(s.id),n.invalidateQueries({queryKey:["balance",c]}),r()},[s,n,c,r,d]);return e.jsx(W,{isOpen:i,onClose:r,tier:s,title:`Upgrade Liteservers to ${s.name} Plan`,isLoading:o,onConfirm:a})};U.displayName="LiteserversPurchaseDialog";const Te=()=>{const[i,r]=S.useState(null),{data:s,isLoading:c}=ue(),{data:n}=pe(),{mutateAsync:d}=he(),{isOpen:o,onOpen:a,onClose:h}=w(),{isOpen:m,onOpen:g,onClose:f}=w(),j=async p=>{if((n==null?void 0:n.id)===p.id)return;const{valid:l,unspent_money:y}=await d(p.id);if(!l){g();return}const A=y?new C(y):void 0;r({...p,unspentMoney:A}),a()};return c||!s?e.jsx(B,{py:"8",children:e.jsx($,{})}):e.jsxs(e.Fragment,{children:[e.jsxs(u,{mb:"8",children:[e.jsxs(x,{align:"baseline",direction:"column",gap:"2",mb:"4",children:[e.jsx(t,{textStyle:"h4",fontWeight:600,children:"Liteservers"}),e.jsxs(t,{textStyle:"body2",color:"text.secondary",children:["Direct access to TON blockchain via Liteserver protocol."," ",e.jsx(L,{color:"accent.blue",href:"https://docs.tonconsole.com/tonapi/liteservers",isExternal:!0,children:"Learn more about Liteservers"})]})]}),e.jsxs(P,{gap:"4",templateColumns:"repeat(auto-fit, minmax(230px, 1fr))",children:[s==null?void 0:s.map(p=>{const v=new C(p.usd_price),l=(n==null?void 0:n.id)===p.id,y=v.amount.eq(0);return e.jsx(M,{name:p.name,price:y?"$0":v.stringCurrencyAmount,rps:p.rps,priceDescription:"Monthly",isCurrent:l,onSelect:l?void 0:()=>j(p)},p.id)}),e.jsx(M,{name:"Custom",price:"Custom",rps:"∞",priceDescription:"Contact us",onSelect:z("unlimited-liteservers"),buttonText:"Request",buttonVariant:"contrast"})]})]}),i&&e.jsx(U,{isOpen:o,onClose:h,selectedTier:i}),e.jsx(N,{isOpen:m,onClose:f})]})},b={accounts:[{limit:1e6,price:60},{limit:1e7,price:15},{limit:1/0,price:6}],messages:[{limit:1e6,price:300},{limit:1e7,price:60},{limit:1/0,price:30}]};function me(i){let r=0;return i.map(({limit:s,price:c})=>{const n=s-r;return r+=s,{limit:n,price:c}})}function D(i,r){return me(r).reduce((c,{limit:n,price:d})=>{const o=Math.min(c.count,n),a=o*d/1e6;return{count:c.count-o,total:c.total+a}},{count:i,total:0}).total}function ge(i,r){const c=D(i??0,b.accounts),d=D(r??0,b.messages);return c+d}const je=()=>e.jsxs(P,{gap:3,children:[e.jsxs(u,{children:[e.jsx(t,{textStyle:"label2",pb:2,fontWeight:600,children:"Subscribed accounts"}),e.jsxs(P,{gap:"1px",templateColumns:"repeat(3, 1fr)",children:[e.jsxs(u,{flex:"1",p:"5px",color:"white",fontWeight:600,textAlign:"center",bg:"#6C727E",borderLeftRadius:"md",children:["$",b.accounts[0].price]}),e.jsxs(u,{flex:"1",p:"5px",color:"white",fontWeight:600,textAlign:"center",bg:"#9EA4B0",children:["$",b.accounts[1].price]}),e.jsxs(u,{flex:"1",p:"5px",pl:"30px",color:"white",fontWeight:600,textAlign:"center",bgGradient:"linear(to-r, #C6CCD8 50%, transparent 100%)",borderRightRadius:"md",children:["$",b.accounts[2].price]}),e.jsx(t,{color:"text.secondary",variant:"body2",children:"million"}),e.jsx(t,{ml:"-4px",color:"text.secondary",variant:"body2",children:"1"}),e.jsx(t,{ml:"-10px",color:"text.secondary",variant:"body2",children:"10"})]})]}),e.jsxs(u,{children:[e.jsx(t,{textStyle:"label2",pb:2,fontWeight:600,children:"Number of messages sent"}),e.jsxs(P,{gap:"1px",templateColumns:"repeat(3, 1fr)",children:[e.jsxs(u,{flex:"1",p:"5px",color:"white",fontWeight:600,textAlign:"center",bg:"#6C727E",borderLeftRadius:"md",children:["$",b.messages[0].price]}),e.jsxs(u,{flex:"1",p:"5px",color:"white",fontWeight:600,textAlign:"center",bg:"#9EA4B0",children:["$",b.messages[1].price]}),e.jsxs(u,{flex:"1",p:"5px",color:"white",fontWeight:600,textAlign:"center",bgGradient:"linear(to-r, #C6CCD8 50%, transparent 100%)",borderRightRadius:"md",children:["$",b.messages[2].price]}),e.jsx(t,{color:"text.secondary",variant:"body2",children:"million"}),e.jsx(t,{ml:"-4px",color:"text.secondary",variant:"body2",children:"1"}),e.jsx(t,{ml:"-10px",color:"text.secondary",variant:"body2",children:"10"})]})]})]}),be=()=>{const[i,r]=S.useState(null),[s,c]=S.useState(null),n=(o,a)=>{const h=o.target.value;/^\d*$/.test(h)&&a(h?parseInt(h):null)},d=new C(ge(i,s));return e.jsxs(I,{w:"100%",children:[e.jsx(ye,{children:e.jsx(t,{textStyle:"text.label2",fontWeight:600,children:"Pricing Calculator"})}),e.jsxs(ie,{flexDir:"column",gap:"16px",display:"flex",children:[e.jsx(O,{bg:"white",border:"1px solid #83898F52",onChange:o=>n(o,r),placeholder:"Subscribed accounts",value:i??""}),e.jsx(O,{bg:"white",border:"1px solid #83898F52",onChange:o=>n(o,c),placeholder:"Number of messages sent",value:s??""}),e.jsxs(x,{justify:"space-between",children:[e.jsx(t,{textStyle:"body2",color:"text.secondary",children:"Estimated month price"}),e.jsx(t,{textStyle:"label",fontWeight:600,children:d.stringCurrencyAmount})]})]})]})},we=({hideActivation:i=!1})=>{const r=re(),s=()=>{r("../webhooks")};return e.jsxs(u,{children:[e.jsxs(x,{align:"baseline",gap:"3",mb:"4",children:[e.jsx(t,{textStyle:"h4",fontWeight:600,children:"Webhooks"}),!i&&e.jsx(E,{fontSize:"xs",colorScheme:"gray",children:"Inactive"})]}),e.jsxs(x,{align:"flex-start",wrap:"wrap",gap:"6",children:[e.jsxs(u,{flex:"3 1 300px",minW:"300px",children:[e.jsx(t,{textStyle:"body2",mb:"3",color:"text.secondary",children:"Usage-based pricing. Charged hourly for connected accounts and per message sent. Use the calculator to estimate your monthly costs."}),e.jsx(je,{})]}),e.jsxs(u,{flex:"1 1 308px",minW:"280px",children:[e.jsx(be,{}),!i&&e.jsx(T,{w:"100%",mt:"4",onClick:s,variant:"primary",children:"Activate Webhooks"})]})]})]})};export{Te as L,Re as R,we as W};
