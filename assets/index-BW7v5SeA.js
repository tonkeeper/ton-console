import{j as e,bM as y,T as x,c8 as g,W as C,i as S,c9 as D,ca as F,ah as O,cb as I,av as v,r as d,O as E,k as M,C as T,F as w,aM as k,bj as B,P as L,b as u}from"./index-BCN26Ft_.js";const N=r=>{const{projectName:t,isOpen:i,onClose:a,onConfirm:o}=r;return e.jsx(y,{isOpen:i,onClose:a,onConfirm:o,title:s=>`Delete ${s}`,description:s=>e.jsx(e.Fragment,{children:e.jsxs(x,{textStyle:"text.body2",mb:"6",color:"text.secondary",children:["This action cannot be canceled. To confirm, type ",e.jsx("b",{children:s})," in the box below."]})}),confirmValue:t,confirmButtonText:"Delete"})},U=()=>{const r="edit-project-form",t=g(),i=C(),a=S(),o=D(),s=F(),{data:c}=O();I(i,c==null?void 0:c.id);const j=v(),[f,l]=d.useState(!1),{formState:n}=j,p=d.useMemo(()=>t||void 0,[t]),b=d.useCallback(P=>{if(!t)return;const h=Object.fromEntries(Object.keys(n.dirtyFields).map(m=>[m,P[m]]));o.mutate({projectId:t.id,...h})},[n.dirtyFields,t,o]);return e.jsxs(E,{children:[e.jsx(M,{children:"Edit project"}),e.jsx(T,{h:"100%",children:e.jsxs(w,{align:"center",direction:"column",w:"100%",maxW:"512px",children:[e.jsx(x,{textStyle:"label2",alignSelf:"flex-start",mb:"1",children:"Project ID"}),e.jsx(k,{alignSelf:"flex-start",mb:"4",variant:"flat",size:"sm",pr:"1",textStyles:{textStyle:"label1"},text:t.id.toString()||""}),e.jsx(B,{...j,children:e.jsx(L,{defaultValues:p,id:r,mb:"4",onSubmit:b,disableDefaultFocus:!0})}),e.jsx(u,{w:"100%",mb:"4",form:r,isDisabled:!(n!=null&&n.isDirty)||s.isPending,isLoading:o.isPending,type:"submit",children:"Save"}),e.jsxs(e.Fragment,{children:[e.jsx(u,{w:"100%",colorScheme:"red",isLoading:s.isPending,onClick:()=>l(!0),children:"Delete project"}),e.jsx(N,{isOpen:f,onClose:()=>l(!1),projectName:t.name,onConfirm:()=>{s.mutate(t.id,{onSuccess:()=>{l(!1),a(null)}})}})]})]})})]})};export{U as default};
