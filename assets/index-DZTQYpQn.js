import{bu as y,j as e,b1 as C,bw as g,by as D,bz as T,cs as S,b3 as F,bt as I,aK as R,v as $,X as N,el as E,em as q,en as A,r as L,a$ as U,O as f,V as H,T as p,F as J,k as P,eo as V,bH as W,b as h,ep as O,bC as B,eq as z,er as K,es as X,N as Y,et as _}from"./index--6gyeIm1.js";import{C as G,a as Q,b as Z,c as ee}from"./LogoControl-Bg7voZ5V.js";const j="decimals",te=({context:{register:n,formState:{errors:r}}})=>{const s=j,t=r[j],{ref:i}=y({mask:Number,scale:0,min:0,max:255}),{ref:a,...o}=n(s,{required:"This is required"});return e.jsxs(C,{mb:0,isInvalid:!!t,isRequired:!0,children:[e.jsx(g,{htmlFor:s,children:"Decimal precision"}),e.jsx(D,{ref:T(i,a),autoComplete:"off",defaultValue:"9",id:s,placeholder:"9",...o}),e.jsx(S,{color:"text.secondary",children:"The decimal precision of your token (9 is TON default)."}),e.jsx(F,{pos:"static",children:t&&t.message})]})},b="mint",se=({context:{register:n,formState:{errors:r}}})=>{const s=b,t=r[b],{ref:i}=y({mask:/^(0|[1-9]\d*)$/}),{ref:a,...o}=n(s,{required:"This is required",validate:l=>Number(l)>0||"Should be greater than 0"});return e.jsxs(C,{mb:0,isInvalid:!!t,isRequired:!0,children:[e.jsx(g,{htmlFor:s,children:"Tokens to Mint"}),e.jsx(D,{ref:T(i,a),autoComplete:"off",id:s,placeholder:"238",...o}),e.jsx(F,{pos:"static",children:t&&t.message})]})},oe=({id:n,onSubmit:r,...s})=>{const t=I(),{handleSubmit:i}=t,a=o=>{r(o)};return e.jsxs(R.form,{id:n,w:"100%",maxW:600,onSubmit:i(a),noValidate:!0,gap:4,display:"flex",flexDirection:"column",...s,children:[e.jsx(G,{context:t}),e.jsx(Q,{context:t}),e.jsx(te,{context:t}),e.jsx(se,{context:t}),e.jsx(Z,{context:t}),e.jsx(ee,{context:t})]})},ne=9,ie=()=>{const n=$(),r=N(),s=E(),{open:t}=q(),[i]=A(),[a,o]=L.useState(!1),l="jetton-form-id",v=U({}),w=async c=>{o(!0);const d={onchainMetaData:{name:c.name,symbol:c.symbol,description:c.description,decimals:c.decimals,image:c.image},offchainUri:void 0,owner:B.Address.parse(s),amountToMint:O(c.mint,c.decimals??ne)},k=await z(d,d.offchainUri),u=new K().addressForContract(k),M=await X.accounts.getAccount(u).then(m=>m.status==="active"),x=`/jetton/minter/view/${u.toString()}`;if(M){o(!1),n({title:"Contract already deployed",description:e.jsxs(p,{children:["This contract already exists. You can view it"," ",e.jsx(Y,{textStyle:"body1",color:"constant.white",textDecoration:"underline",href:x,children:"here"})]}),position:"bottom-left",status:"error",duration:1e6,isClosable:!0});return}await _.createJetton(d,i).then(()=>r(x)).catch(m=>n({title:"Error",description:m.message,status:"error",position:"bottom-left",duration:1e6,isClosable:!0})).finally(()=>{o(!1)})};return a?e.jsxs(f,{display:"flex",justifyContent:"center",alignItems:"center",children:[e.jsx(H,{}),e.jsx(p,{ml:2,children:"Deploying jetton contract..."})]}):e.jsxs(f,{display:"flex",flexDirection:"column",children:[e.jsxs(J,{align:"flex-start",justify:"space-between",mb:"5",children:[e.jsx(P,{children:"New Jetton"}),e.jsx(V,{})]}),e.jsx(W,{...v,children:e.jsx(oe,{onSubmit:w,id:l})}),s?e.jsx(h,{flex:1,maxW:600,mt:4,form:l,isLoading:a,type:"submit",variant:"primary",children:"Mint"}):e.jsx(h,{flex:1,maxW:600,mt:4,onClick:t,variant:"primary",children:"Connect Wallet"})]})};export{ie as default};
