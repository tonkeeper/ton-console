import{r as A,j as e,bN as D,F as x,T as t,f as q,b as L,U as v,ay as J,az as Z,aA as ee,aB as te,k as se,aC as ne,aD as oe,bO as re,B as u,p as ie,bP as ce,bQ as ae,b4 as le,a3 as U,q as G,l as M,C as E,V as F,N as k,bM as de,aI as T,aO as V,R as H,X as Q,bR as xe,by as B}from"./index--6gyeIm1.js";import{b as ue,c as pe,a as he,d as ye}from"./queries-bGH_afm3.js";import{C as Y}from"./card-Csp8xPXk.js";import{b as me,c as ge,a as je,d as be}from"./queries-Dkadx4GS.js";import{a as fe}from"./queries-CpxNtx4N.js";import{C as Ce}from"./card-header-Bk90WjMF.js";import{C as Se}from"./card-body-B5KnP0ef.js";const W=({name:r,price:o,rps:s,priceDescription:i,isCurrent:c=!1,isDisabled:a=!1,onSelect:n,buttonText:l="Choose",buttonVariant:m,...h})=>{const[y,g]=A.useState(!1);return e.jsxs(Y,{pos:"relative",direction:"column",p:"2",opacity:a?.6:1,border:c?"2px solid":"1px solid",borderColor:c?"text.secondary":"gray.200",transition:"all 0.2s",onMouseEnter:()=>!a&&g(!0),onMouseLeave:()=>!a&&g(!1),size:"xl",...h,children:[c&&e.jsx(D,{pos:"absolute",right:"0",bottom:"0",px:"3",py:"1",color:"white",fontSize:"xs",bg:"text.secondary",borderTopRightRadius:"0",borderTopLeftRadius:"md",borderBottomLeftRadius:"0",borderBottomRightRadius:"0",children:"Current"}),e.jsxs(x,{justify:"space-between",gap:"4",children:[e.jsxs(x,{direction:"column",flex:"1",children:[e.jsx(t,{textStyle:"label2",color:"text.secondary",children:r}),e.jsx(q,{fontSize:24,children:o}),i&&e.jsx(t,{textStyle:"body2",color:"text.secondary",children:i})]}),e.jsx(x,{justify:"center",children:y&&n&&!a?e.jsx(L,{alignSelf:"center",onClick:n,size:"lg",variant:m,children:l}):e.jsxs(x,{align:"flex-end",direction:"column",children:[e.jsx(t,{textStyle:"label2",color:"text.secondary",children:"RPS"}),e.jsx(q,{fontSize:24,children:s})]})})]})]})},N=({isOpen:r,onClose:o,tier:s,title:i,isLoading:c,onConfirm:a})=>{const n=s.unspentMoney,l=s.price||new v(s.usd_price||0),m=l.amount.eq(0),h=n&&n.isGTE(l),y=n?new v(l.amount.minus(n.amount)):l,g=m||h?new v(0):y,f=!s.type||s.type==="monthly",C=s.type==="pay-as-you-go";return e.jsxs(J,{isOpen:r,onClose:o,scrollBehavior:"inside",size:"md",children:[e.jsx(Z,{}),e.jsxs(ee,{children:[e.jsxs(te,{children:[e.jsx(se,{mb:"1",children:"Payment Details"}),e.jsx(t,{textStyle:"body2",color:"text.secondary",children:i})]}),e.jsx(ne,{}),e.jsxs(oe,{py:"0",children:[e.jsxs(re,{mb:"4",children:[e.jsxs(x,{justify:"space-between",gap:"10",mb:"1",children:[e.jsx(t,{textStyle:"body2",color:"text.secondary",children:"Plan"}),e.jsx(t,{textStyle:"body2",color:"text.primary",children:s.name})]}),e.jsxs(x,{justify:"space-between",gap:"10",mb:"1",children:[e.jsx(t,{textStyle:"body2",color:"text.secondary",children:"Included"}),e.jsxs(t,{textStyle:"body2",color:"text.primary",textAlign:"right",children:[s.rps," RPS"]})]}),f&&e.jsxs(x,{justify:"space-between",gap:"10",mb:"1",children:[e.jsx(t,{textStyle:"body2",color:"text.secondary",children:"Period"}),e.jsx(t,{textStyle:"body2",color:"text.primary",children:"Monthly"})]}),C&&e.jsxs(x,{justify:"space-between",gap:"10",mb:"1",children:[e.jsx(t,{textStyle:"body2",color:"text.secondary",children:"Price Model"}),e.jsx(t,{textStyle:"body2",color:"text.primary",children:"per 1K requests"})]}),n&&e.jsxs(x,{justify:"space-between",gap:"10",mb:"1",children:[e.jsx(t,{textStyle:"body2",color:"text.secondary",children:"Price"}),e.jsx(u,{children:e.jsx(t,{textStyle:"body2",color:"text.primary",textAlign:"right",title:l.stringAmountWithoutRound,children:l.amount.eq(0)?"Free":l.stringCurrencyAmount})})]}),!h&&!m&&n&&e.jsxs(x,{justify:"space-between",gap:"10",mb:"1",children:[e.jsx(t,{textStyle:"body2",color:"text.secondary",children:"Unspent funds"}),e.jsx(t,{textStyle:"body2",color:"text.secondary",textAlign:"right",title:n.stringAmountWithoutRound,children:n.stringCurrencyAmount})]}),!C&&e.jsxs(x,{justify:"space-between",gap:"10",mb:"1",children:[e.jsx(t,{textStyle:"body2",color:"text.secondary",children:n?"Total":"Price"}),g.amount.eq(0)?e.jsxs(x,{align:"center",gap:1,children:[e.jsx(t,{textStyle:"body2",textAlign:"right",children:"Free"}),h&&!m&&e.jsx(ie,{children:e.jsx(u,{textStyle:"body2",maxW:"200px",children:"Your unspent money is enough to cover the cost of the plan"})})]}):e.jsx(t,{textStyle:"body2",color:"text.primary",textAlign:"right",title:g.stringAmountWithoutRound,children:g.stringCurrencyAmount})]})]}),f&&e.jsx(t,{textStyle:"body3",color:"text.secondary",children:"Your plan will renew automatically every month until cancelled."}),n&&y.amount.isNegative()&&f&&e.jsxs(ce,{mt:"4",borderRadius:"md",status:"warning",variant:"subtle",children:[e.jsx(ae,{}),e.jsxs(u,{children:[e.jsx(t,{textStyle:"body3",mb:"1",children:"You will be switched to the new tariff immediately"}),e.jsx(t,{textStyle:"body3",color:"text.secondary",children:"Remaining days of your current plan will be forfeited"})]})]})]}),e.jsxs(le,{gap:"3",children:[e.jsx(L,{flex:1,onClick:o,variant:"secondary",children:"Cancel"}),e.jsx(L,{flex:1,isLoading:c,onClick:a,variant:"primary",children:"Confirm Purchase"})]})]})]})};N.displayName="PurchaseDialog";const K=({isOpen:r,onClose:o,selectedTier:s})=>{const i=U(),c=G(),{mutate:a,isPending:n}=ue(),l=A.useCallback(async()=>{a(s.id,{onSuccess:()=>{i.invalidateQueries({queryKey:["balance",c]}),o()}})},[s,i,c,o,a]);return e.jsx(N,{isOpen:r,onClose:o,tier:s,title:`Upgrade to TON API ${s.name} Plan`,isLoading:n,onConfirm:l})};K.displayName="RestApiPurchaseDialog";const Oe=({displayOnly:r=!1})=>{const[o,s]=A.useState(null),{data:i,isLoading:c}=pe(),{data:a}=he(),{mutateAsync:n}=ye(),{isOpen:l,onOpen:m,onClose:h}=M(),{isOpen:y,onOpen:g,onClose:f}=M(),C=a==null?void 0:a.id,I=async d=>{if(C===d.id)return;const{valid:P,unspent_money:p}=await n(d.id);if(!P){g();return}const S=p?new v(p):void 0;s({...d,unspentMoney:S}),m()};if(c||!i)return e.jsx(E,{py:"8",children:e.jsx(F,{})});const O=[...i].sort((d,j)=>d.type==="monthly"&&j.type==="pay-as-you-go"?-1:d.type==="pay-as-you-go"&&j.type==="monthly"?1:0);return e.jsxs(e.Fragment,{children:[e.jsxs(u,{mb:"8",children:[e.jsxs(x,{align:"baseline",direction:"column",gap:"2",mb:"4",children:[e.jsx(t,{textStyle:"h4",fontWeight:600,children:"REST API"}),e.jsxs(t,{textStyle:"body2",color:"text.secondary",children:["Access TON blockchain data via REST API."," ",e.jsx(k,{as:de,color:"accent.blue",to:"/tonapi/api-keys",children:"Get API keys"})," ","or explore the"," ",e.jsx(k,{color:"accent.blue",href:"https://docs.tonconsole.com/tonapi/rest-api",isExternal:!0,children:"API documentation"})]})]}),e.jsxs(T,{gap:"4",templateColumns:"repeat(auto-fit, minmax(230px, 1fr))",children:[O.map(d=>{const j=C===d.id,P=d.price.amount.eq(0),p=d.type==="pay-as-you-go",S=r||j;return e.jsx(W,{name:d.name,price:P?"$0":d.price.stringCurrencyAmount,rps:d.rps,priceDescription:p?"per 1K requests":d.type==="monthly"?"Monthly":void 0,isCurrent:j,onSelect:S?void 0:()=>I(d)},d.id)}),e.jsx(W,{name:"Custom",price:"Custom",rps:"∞",priceDescription:"Contact us",onSelect:r?void 0:V("unlimited-restapi"),buttonText:"Request",buttonVariant:"contrast"})]})]}),o&&e.jsx(K,{isOpen:l,onClose:h,selectedTier:o}),e.jsx(H,{isOpen:y,onClose:f})]})},_=({isOpen:r,onClose:o,selectedTier:s})=>{const i=G(),c=U(),{mutateAsync:a,isPending:n}=me(),l=A.useCallback(async()=>{await a(s.id),c.invalidateQueries({queryKey:["balance",i]}),o()},[s,c,i,o,a]);return e.jsx(N,{isOpen:r,onClose:o,tier:s,title:`Upgrade Liteservers to ${s.name} Plan`,isLoading:n,onConfirm:l})};_.displayName="LiteserversPurchaseDialog";const De=({displayOnly:r=!1})=>{const o=Q(),[s,i]=A.useState(null),{data:c,isLoading:a}=ge(),{data:n,isLoading:l}=je(),{mutateAsync:m}=be(),h=!n&&!l,y=!r&&h,g=()=>{o("../liteservers")},{isOpen:f,onOpen:C,onClose:I}=M(),{isOpen:O,onOpen:d,onClose:j}=M(),P=async p=>{if((n==null?void 0:n.id)===p.id)return;const{valid:R,unspent_money:w}=await m(p.id);if(!R){d();return}const X=w?new v(w):void 0;i({...p,unspentMoney:X}),C()};return a||!c?e.jsx(E,{py:"8",children:e.jsx(F,{})}):e.jsxs(e.Fragment,{children:[e.jsxs(u,{mb:"8",children:[e.jsxs(x,{align:"baseline",gap:"3",mb:"4",children:[e.jsx(t,{textStyle:"h4",fontWeight:600,children:"Liteservers"}),!r&&h&&e.jsx(D,{fontSize:"xs",colorScheme:"gray",children:"Inactive"})]}),e.jsxs(t,{textStyle:"body2",mb:"4",color:"text.secondary",children:["Direct access to TON blockchain via Liteserver protocol."," ",e.jsx(k,{color:"accent.blue",href:"https://docs.tonconsole.com/tonapi/liteservers",isExternal:!0,children:"Learn more about Liteservers"}),y&&e.jsxs(e.Fragment,{children:[". To get started with Liteservers, activate the service in the"," ",e.jsx(k,{color:"accent.blue",fontWeight:500,cursor:"pointer",onClick:g,children:"dedicated section"})]})]}),e.jsxs(T,{gap:"4",templateColumns:"repeat(auto-fit, minmax(230px, 1fr))",children:[c==null?void 0:c.map(p=>{const S=new v(p.usd_price),R=(n==null?void 0:n.id)===p.id,w=S.amount.eq(0);return e.jsx(W,{name:p.name,price:w?"$0":S.stringCurrencyAmount,rps:p.rps,priceDescription:"Monthly",isCurrent:R,isDisabled:y,onSelect:!y&&!R?()=>P(p):void 0},p.id)}),e.jsx(W,{name:"Custom",price:"Custom",rps:"∞",priceDescription:"Contact us",isDisabled:y,onSelect:y?void 0:V("unlimited-liteservers"),buttonText:"Request",buttonVariant:"contrast"})]})]}),s&&e.jsx(_,{isOpen:f,onClose:I,selectedTier:s}),e.jsx(H,{isOpen:O,onClose:j})]})},b={accounts:[{limit:1e6,price:60},{limit:1e7,price:15},{limit:1/0,price:6}],messages:[{limit:1e6,price:300},{limit:1e7,price:60},{limit:1/0,price:30}]};function ve(r){let o=0;return r.map(({limit:s,price:i})=>{const c=s-o;return o+=s,{limit:c,price:i}})}function z(r,o){return ve(o).reduce((i,{limit:c,price:a})=>{const n=Math.min(i.count,c),l=n*a/1e6;return{count:i.count-n,total:i.total+l}},{count:r,total:0}).total}function Ae(r,o){const i=z(r??0,b.accounts),a=z(o??0,b.messages);return i+a}const Pe=({isDisabled:r=!1})=>e.jsxs(T,{gap:3,opacity:r?.6:1,children:[e.jsxs(u,{children:[e.jsx(t,{textStyle:"label2",pb:2,fontWeight:600,children:"Subscribed accounts"}),e.jsxs(T,{gap:"1px",templateColumns:"repeat(3, 1fr)",children:[e.jsxs(u,{flex:"1",p:"5px",color:"white",fontWeight:600,textAlign:"center",bg:"#6C727E",borderLeftRadius:"md",children:["$",b.accounts[0].price]}),e.jsxs(u,{flex:"1",p:"5px",color:"white",fontWeight:600,textAlign:"center",bg:"#9EA4B0",children:["$",b.accounts[1].price]}),e.jsxs(u,{flex:"1",p:"5px",pl:"30px",color:"white",fontWeight:600,textAlign:"center",bgGradient:"linear(to-r, #C6CCD8 50%, transparent 100%)",borderRightRadius:"md",children:["$",b.accounts[2].price]}),e.jsx(t,{color:"text.secondary",variant:"body2",children:"million"}),e.jsx(t,{ml:"-4px",color:"text.secondary",variant:"body2",children:"1"}),e.jsx(t,{ml:"-10px",color:"text.secondary",variant:"body2",children:"10"})]})]}),e.jsxs(u,{children:[e.jsx(t,{textStyle:"label2",pb:2,fontWeight:600,children:"Number of messages sent"}),e.jsxs(T,{gap:"1px",templateColumns:"repeat(3, 1fr)",children:[e.jsxs(u,{flex:"1",p:"5px",color:"white",fontWeight:600,textAlign:"center",bg:"#6C727E",borderLeftRadius:"md",children:["$",b.messages[0].price]}),e.jsxs(u,{flex:"1",p:"5px",color:"white",fontWeight:600,textAlign:"center",bg:"#9EA4B0",children:["$",b.messages[1].price]}),e.jsxs(u,{flex:"1",p:"5px",color:"white",fontWeight:600,textAlign:"center",bgGradient:"linear(to-r, #C6CCD8 50%, transparent 100%)",borderRightRadius:"md",children:["$",b.messages[2].price]}),e.jsx(t,{color:"text.secondary",variant:"body2",children:"million"}),e.jsx(t,{ml:"-4px",color:"text.secondary",variant:"body2",children:"1"}),e.jsx(t,{ml:"-10px",color:"text.secondary",variant:"body2",children:"10"})]})]})]}),Te=({isDisabled:r=!1})=>{const[o,s]=A.useState(null),[i,c]=A.useState(null),a=(l,m)=>{const h=l.target.value;/^\d*$/.test(h)&&m(h?parseInt(h):null)},n=new v(Ae(o,i));return e.jsxs(Y,{flexDir:"column",display:"flex",w:"100%",opacity:r?.6:1,children:[e.jsx(Ce,{children:e.jsx(t,{textStyle:"text.label2",fontWeight:600,children:"Pricing Calculator"})}),e.jsxs(Se,{flexDir:"column",gap:"16px",display:"flex",children:[e.jsx(B,{bg:"white",border:"1px solid #83898F52",isDisabled:r,onChange:l=>!r&&a(l,s),placeholder:"Subscribed accounts",value:o??""}),e.jsx(B,{bg:"white",border:"1px solid #83898F52",isDisabled:r,onChange:l=>!r&&a(l,c),placeholder:"Number of messages sent",value:i??""}),e.jsxs(x,{justify:"space-between",children:[e.jsx(t,{textStyle:"body2",color:"text.secondary",children:"Estimated month price"}),e.jsx(t,{textStyle:"label",fontWeight:600,children:n.stringCurrencyAmount})]})]})]})},$=({isLoading:r=!1,isInactive:o=!1,onTryWebhooks:s})=>r?e.jsx(E,{py:"8",children:e.jsx(F,{})}):e.jsxs(u,{children:[e.jsxs(x,{align:"baseline",gap:"3",mb:"4",children:[e.jsx(t,{textStyle:"h4",fontWeight:600,children:"Webhooks"}),o&&e.jsx(D,{fontSize:"xs",colorScheme:"gray",children:"Inactive"})]}),e.jsxs(x,{align:"flex-start",wrap:"wrap",gap:"6",children:[e.jsxs(u,{flex:"3 1 300px",minW:"300px",children:[e.jsx(t,{textStyle:"body2",mb:"3",color:"text.secondary",children:"Usage-based pricing. Charged hourly for connected accounts and per message sent. Use the calculator to estimate your monthly costs."}),e.jsx(Pe,{})]}),e.jsxs(u,{flex:"1 1 308px",minW:"280px",children:[e.jsx(Te,{}),o&&s&&e.jsx(L,{w:"100%",mt:"4",onClick:s,variant:"primary",children:"Try Webhooks"})]})]})]}),Ee=({displayOnly:r=!1})=>{const o=Q(),{data:s=[],isLoading:i,error:c}=fe(xe.MAINNET);if(r)return e.jsx($,{});const a=!!c,n=s.length===0&&!i&&!a;return e.jsx($,{isLoading:i,isInactive:n,onTryWebhooks:()=>o("../webhooks")})};export{De as L,Oe as R,Ee as W};
