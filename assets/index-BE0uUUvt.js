import{j as e,dk as f,b8 as C,O as u,k as j,dl as G,T as y,F as x,d as O,b as m,D as b,b$ as w,p as g,c1 as v,dm as P,N as D,dn as E,X as R,cy as A,r as l,dp as L,bG as H,C as N,V as T}from"./index--6gyeIm1.js";import{A as F}from"./analytics-graph-query.store-dLjJUAwF.js";import{O as Q,a as _}from"./list-DJsRQ8jn.js";import{A as B}from"./ANALYTICS_LINKS-WaHD7Hyc.js";import{u as $}from"./useLocalObservable-BPr5Op9k.js";import"./serialize-a49E7W4J.js";const k=({addresses:s,...i})=>e.jsx(Q,{sx:{counterReset:"item",listStyleType:"none","li:before":{content:'counter(item) "  "',counterIncrement:"item",display:"inline-block",width:"28px"}},textStyle:"body2",overflow:"auto",color:"text.secondary",fontFamily:"mono",stylePosition:"inside",...i,children:s.map(n=>e.jsx(_,{display:"block",children:n.toString()},n.toString()))}),z=({query:s})=>{const[i,n]=f(),{hasCopied:o,onCopy:a}=C(s.addresses.map(c=>c.toString()).join(`
`));return e.jsxs(u,{h:"100%",maxH:"100%",display:"flex",flexDirection:"column",children:[e.jsxs(j,{display:"flex",alignItems:"center",color:"accent.green",mb:"2",children:[e.jsx(G,{mr:"2"}),"Success"]}),e.jsx(y,{textStyle:"body2",mb:"4",color:"text.secondary",children:"Following the link you will see a visualization of the stories of the accounts you specified"}),e.jsxs(x,{gap:"4",children:[e.jsx(O,{w:"fit-content",isExternal:!0,href:s.resultUrl,mb:"5",children:"Show Result"}),e.jsx(m,{onClick:()=>n({}),variant:"secondary",children:"New Request"})]}),e.jsx(b,{w:"auto",mx:"-6",mb:"5"}),e.jsxs(x,{align:"center",gap:"1",mb:"3",children:[e.jsx(w,{mb:"0 !important",isChecked:s.isBetweenSelectedOnly,isDisabled:!0,children:"Only between these accounts"}),e.jsx(g,{children:"Description"})]}),e.jsx(k,{mb:"5",addresses:s.addresses}),e.jsx(m,{w:"fit-content",mb:"5",leftIcon:e.jsx(v,{color:"icon.primary"}),onClick:a,variant:"secondary",children:o?"Copied!":"Copy"})]})},K=({query:s})=>{const[i,n]=f(),{hasCopied:o,onCopy:a}=C(s.addresses.map(c=>c.toString()).join(`
`));return e.jsxs(u,{display:"flex",flexDirection:"column",children:[e.jsxs(j,{color:"accent.red",mb:"2",display:"flex",alignItems:"center",children:[e.jsx(P,{mr:"2"}),"Error"]}),e.jsx(y,{textStyle:"body2",mb:"4",color:"text.secondary",children:s.errorReason}),e.jsx(m,{w:"fit-content",mb:"5",onClick:()=>n({}),variant:"secondary",children:"New Request"}),e.jsx(b,{w:"auto",mx:"-6",mb:"5"}),e.jsxs(x,{align:"center",gap:"1",mb:"3",children:[e.jsx(w,{mb:"0 !important",isChecked:s.isBetweenSelectedOnly,isDisabled:!0,children:"Only between these accounts"}),e.jsx(g,{children:"Description"})]}),e.jsx(k,{mb:"5",addresses:s.addresses}),e.jsx(m,{w:"fit-content",mb:"5",leftIcon:e.jsx(v,{color:"icon.primary"}),onClick:a,variant:"secondary",children:o?"Copied!":"Copy"})]})},U=({analyticsGraphQueryStore:s})=>e.jsxs(u,{display:"flex",flexDirection:"column",children:[e.jsxs(x,{align:"center",justify:"space-between",mb:"1",children:[e.jsx(j,{mb:"1",children:"Graph"}),e.jsx(D,{textStyle:"label2",color:"accent.blue",href:B.GRAPH.HOW_IT_WORKS,isExternal:!0,children:"How it works"})]}),e.jsx(y,{textStyle:"body2",mb:"5",color:"text.secondary",children:"Visualization of the transaction history of the accounts you are interested in."}),e.jsx(b,{w:"auto",mx:"-6",mb:"5"}),e.jsx(E,{flex:"1",analyticsGraphQueryStore:s})]}),Z=()=>{const s=R(),[i,n]=f(),o=i.get("id"),a=A(),[c,d]=l.useState(!1),r=$(()=>new F(a));l.useEffect(()=>{var S;o?o!==((S=r.query$.value)==null?void 0:S.id)?(d(!1),r.loadQuery(o).then(()=>d(!0)).catch(()=>n({}))):d(!0):(d(!0),r.clear())},[o]);const h=a==null?void 0:a.id,p=L(h);l.useEffect(()=>{p!==void 0&&h!==p&&s("../history")},[p,h]);const t=r.query$.value,I=l.useCallback(()=>{(t==null?void 0:t.status)==="executing"&&r.refetchQuery()},[t==null?void 0:t.status,r]);return H(I,1e3),l.useEffect(()=>()=>{r.destroy()},[r]),c?(t==null?void 0:t.status)==="success"?e.jsx(z,{query:t}):(t==null?void 0:t.status)==="error"?e.jsx(K,{query:t}):e.jsx(U,{analyticsGraphQueryStore:r}):e.jsx(u,{children:e.jsx(N,{h:"300px",children:e.jsx(T,{})})})};export{Z as default};
